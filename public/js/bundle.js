/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./client/src/game.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./client/src/game.js":
/*!****************************!*\
  !*** ./client/src/game.js ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n// space_defender.js\n// TODO: Break into Modules\n// TODO Fix Audio Play Error\n// See https://developers.google.com/web/updates/2017/06/play-request-was-interrupted\nconsole.warn(\"Defender Running ...\");\n\nvar Game = function Game(gameName, canvasId) {\n  var canvas = document.getElementById(canvasId);\n  console.log(\"gameName: \", gameName);\n  var width = $(window).width();\n  var height = $(window).height();\n  console.log(\"width: \", width);\n  console.log(\"height: \", height);\n  canvas.width = width;\n  canvas.height = height;\n  this.screen = canvas.getContext('2d');\n  this.gameSize = {\n    x: canvas.width,\n    y: canvas.height\n  };\n  var self = this;\n  this.keyListeners = [];\n  this.bulletCntr = 2;\n  this.score = 0;\n  this.gun_Locked = false;\n  this.gameOver = false;\n  this.paused = false;\n  this.PAUSED_TIMEOUT = 100;\n  this.HIGH_SCORES_SUFFIX = '_highScores';\n  this.invaderFireRate = 0.995;\n  this.level = 0;\n  this.fleetPatrol_X = 0;\n  this.levelData = levelData;\n  this.player = {};\n  this.playerLivesLeft = 3;\n  this.playerStatus = 'ALIVE'; // ALIVE | DEAD\n\n  this.radar = false;\n  this.imageLoadingProgressCallback = {};\n  this.images = {};\n  this.imageUrls = [];\n  this.imagesLoaded = 0;\n  this.imagesFailedToLoad = 0;\n  this.imagesIndex = 0; // Image Methods\n\n  this.getImage = getImage;\n  this.imageLoadedCallback = imageLoadedCallback;\n  this.imageLoadErrorCallback = imageLoadErrorCallback;\n  this.loadImage = loadImage;\n  this.loadImages = loadImages;\n  this.queueImage = queueImage; // Load and Call images\n\n  this.backgroundImg = {};\n  this.explosionImages = [];\n  this.togglePaused = togglePaused; // function\n\n  this.keyboarder = new Keyboarder(this); // Todo --- Put this into an obj to use as sound => url mapping\n  // Load our sounds here\n\n  loadSound(\"/sounds/rocket-ver-1.wav\", function (shootSound) {\n    self.shootSound = shootSound;\n  });\n  loadSound(\"/sounds/explosion-ver-3.wav\", function (explosionSound) {\n    self.explosionSound = explosionSound;\n  });\n  loadSound(\"/sounds/Alien_Gun-ver-1.wav\", function (alienShootSound) {\n    self.alienShootSound = alienShootSound;\n  });\n\n  self.animate = function (time) {\n    // console.log(\"delta: \", time - self.lastTime);\n    self.lastTime = time;\n\n    if (this.gameOver) {\n      // show Game Over Dialog Box Here!!\n      this.gameOver = false;\n      game.over();\n      console.log(\"***** gameOver: *****\");\n      return;\n    }\n\n    if (self.paused) {\n      setTimeout(function () {\n        requestAnimationFrame(self.animate);\n      }, this.PAUSED_TIMEOUT);\n    } else {\n      self.update(time);\n      self.draw(self.screen, self.gameSize);\n      self.drawScoreBox();\n      self.drawLivesLeftBox();\n      requestAnimationFrame(self.animate);\n    }\n  };\n\n  return this;\n}; // end of Game constructor\n\n\nGame.prototype = {\n  start: function start() {\n    var self = this;\n    this.loadLevel(this.level);\n    this.animate();\n  },\n  reset: function reset() {\n    this.bulletCntr = 2;\n    this.score = 0;\n    this.gun_Locked = false;\n    this.gameOver = false;\n    this.paused = false;\n    this.invaderFireRate = 0.995;\n    this.level = 0;\n    this.radar = false;\n    this.bulletCntr = 20;\n    this.gun_Locked = false;\n    this.gameOver = false;\n    this.paused = false;\n  },\n  update: function update(time) {\n    var bodies = this.bodies;\n\n    var tempBodies = _toConsumableArray(bodies);\n\n    var isCollidingWithSomething = function isCollidingWithSomething(b1) {\n      return tempBodies.filter(function (b2) {\n        return colliding(b1, b2);\n      }).length > 0;\n    };\n\n    var filteredBodies = tempBodies.filter(isCollidingWithSomething);\n    var invaderFilteredBodies = [];\n    var playerFilteredBodies = []; // Filter for both using 'for loop'\n    // This is much faster than the slower array filter method\n\n    for (var i = 0; i < filteredBodies.length; i++) {\n      var unknownFilteredBody = filteredBodies[i];\n\n      if (unknownFilteredBody instanceof Invader) {\n        invaderFilteredBodies.push(unknownFilteredBody);\n      }\n\n      if (unknownFilteredBody instanceof Player) {\n        playerFilteredBodies.push(unknownFilteredBody);\n      }\n    }\n\n    for (var _i = 0; _i < invaderFilteredBodies.length; _i++) {\n      if (invaderFilteredBodies[_i].name === \"invader\") {\n        this.score += 100 * (this.getLevel() + 1);\n        invaderFilteredBodies[_i].painter = new ExplosionSpritePainter(game.explosionImages, 'Invader');\n        invaderFilteredBodies[_i].name = \"explosion\";\n\n        try {\n          this.explosionSound.load();\n          this.explosionSound.play();\n        } catch (error) {\n          console.error('Error with loading & playing sound: ', error); // pass exception object to error handler\n        }\n\n        invaderFilteredBodies[_i].size.x = invaderFilteredBodies[_i].size.x * 2.5;\n        invaderFilteredBodies[_i].size.y = invaderFilteredBodies[_i].size.y * 2.5;\n      }\n    }\n\n    for (var _i2 = 0; _i2 < playerFilteredBodies.length; _i2++) {\n      if (playerFilteredBodies[_i2].name === \"player\") {\n        // If player is still alive set him to dead he just got killed LOL\n        if (this.playerStatus === 'ALIVE') {\n          this.playerStatus = 'DEAD';\n          this.playerLivesLeft--;\n        }\n\n        playerFilteredBodies[_i2].name = \"explosion\";\n        playerFilteredBodies[_i2].painter = new ExplosionSpritePainter(game.explosionImages, 'Player');\n\n        try {\n          this.explosionSound.load();\n          this.explosionSound.play();\n        } catch (error) {\n          console.error();\n          'Error with loading & playing sound: ', error; // pass exception object to error handler\n        }\n\n        var imagesSizeMultiplier = this.playerLivesLeft ? 2.5 : 6.0;\n        playerFilteredBodies[_i2].size.x = playerFilteredBodies[_i2].size.x * imagesSizeMultiplier;\n        playerFilteredBodies[_i2].size.y = playerFilteredBodies[_i2].size.y * imagesSizeMultiplier;\n      }\n    }\n\n    var notCollidingWithAnything = function notCollidingWithAnything(b1) {\n      return bodies.filter(function (b2) {\n        return colliding(b1, b2);\n      }).length === 0;\n    };\n\n    this.bodies = this.bodies.filter(notCollidingWithAnything); // Are all Invaders are destroyed \n\n    var invadersLeftAlive = this.bodies.filter(function (unknownBody) {\n      return unknownBody instanceof Invader;\n    });\n\n    if (invadersLeftAlive.length < 5 && invadersLeftAlive.length >= 3) {\n      this.invaderFireRate = 0.98; // Radar is on and stays on from here on this level\n\n      this.radar = true;\n    } else if (invadersLeftAlive.length < 3 && invadersLeftAlive.length >= 2) {\n      this.invaderFireRate = 0.96;\n    } else if (invadersLeftAlive.length < 2) {\n      this.invaderFireRate = 0.92;\n    }\n\n    var allFilteredBodies = [].concat(invaderFilteredBodies, playerFilteredBodies); // Add bodies back with explosion\n\n    if (allFilteredBodies.length > 0) {\n      for (var j = 0; j < allFilteredBodies.length; j++) {\n        this.bodies.push(allFilteredBodies[j]);\n      }\n    } // Remove all bodies that are not visible on the screen \n\n\n    this.bodies = this.bodies.filter(function (theBody) {\n      return theBody.visible;\n    });\n    this.bodies = this.bodies.filter(function (theBody) {\n      return theBody.remove === false;\n    });\n\n    if (this.playerLivesLeft < 1) {\n      //delay game over to let animation finish\n      setTimeout(function () {\n        this.gameOver = true;\n      }, 750);\n    }\n\n    if (invadersLeftAlive.length <= 0 && this.playerLivesLeft > 0) {\n      this.paused = true;\n      this.playerLivesLeft < 8 ? this.playerLivesLeft++ : this.playerLivesLeft;\n      this.incrementLevel();\n      setTimeout(function () {\n        this.game.loadLevel();\n      }, 1250);\n    } // Update Position\n\n\n    for (var idx = 0; idx < this.bodies.length; idx++) {\n      this.bodies[idx].update(time);\n    }\n  },\n  // update\n  draw: function draw(screen, gameSize) {\n    screen.clearRect(0, 0, gameSize.x, gameSize.y);\n    screen.drawImage(this.backgroundImg, 0, 0, gameSize.x, gameSize.y);\n\n    for (var i = 0; i < this.bodies.length; i++) {\n      this.bodies[i].draw(this.screen, this.bodies[i]);\n    }\n  },\n  loadLevel: function loadLevel() {\n    console.log(\" \\n *** Loading level Number \" + this.level + \" ***\");\n    var level = this.getLevel();\n    var level_data = this.levelData[level];\n    var row = level_data.row;\n    var col = level_data.col;\n    var behavior = level_data.behavior;\n    var invaderImage = level_data.invaderImage;\n    this.radar = false;\n    this.player = new Player(this, [new CycleImages(16, 32)], new SpritePainter([game.playerImg]), this.gameSize);\n    this.speedX_Val = level_data.speedX;\n    this.invaderFireRate = level_data.invaderFireRate;\n    this.backgroundImg = level_data.backgroundImg;\n    this.bodies = createInvaders(this, this.gameSize, behavior, invaderImage, row, col).concat(this.player);\n    this.paused = false;\n  },\n  getLevel: function getLevel() {\n    return this.level;\n  },\n  incrementLevel: function incrementLevel() {\n    this.level++;\n\n    if (this.level > this.levelData.length - 1) {\n      this.level = 0;\n    }\n\n    return this.level;\n  },\n  addKeyListener: function addKeyListener(keyAndListener) {\n    game.keyListeners.push(keyAndListener);\n  },\n  findKeyListener: function findKeyListener(key) {\n    var listener;\n    game.keyListeners.forEach(function (keyAndListener) {\n      var currentKey = keyAndListener.key;\n\n      if (currentKey === key) {\n        listener = keyAndListener.listener;\n      }\n    });\n    return listener;\n  },\n  keyPressed: function keyPressed(e) {\n    var listener;\n    key = undefined;\n\n    switch (e.keyCode) {\n      case 67:\n        key = 'c';\n        break;\n\n      case 80:\n        key = 'p';\n        break;\n\n      case 83:\n        key = 's';\n        break;\n    }\n\n    listener = game.findKeyListener(key);\n\n    if (listener) {\n      listener();\n    }\n  },\n  keyUp: function keyUp(e) {\n    var listener;\n    key = undefined;\n\n    switch (e.keyCode) {\n      case 32:\n        key = 'spacebar';\n        break;\n\n      case 37:\n        key = 'left arrow';\n        break;\n\n      case 39:\n        key = 'right arrow';\n        break;\n\n      case 38:\n        key = 'up arrow';\n        break;\n\n      case 40:\n        key = 'down arrow';\n        break;\n    }\n\n    listener = game.findKeyListener(key);\n\n    if (listener) {\n      listener();\n    }\n  },\n  addBody: function addBody(body) {\n    this.bodies.push(body);\n  },\n  invadersBelow: function invadersBelow(invader) {\n    return this.bodies.filter(function (b) {\n      return b instanceof Invader && b.center.y > invader.center.y && b.center.x - invader.center.x < invader.size.x;\n    }).length > 0;\n  },\n  getHighScores: function getHighScores() {\n    var key = game.gameName + game.HIGH_SCORES_SUFFIX,\n        highScoresString = localStorage[key];\n\n    if (highScoresString === undefined) {\n      localStorage[key] = JSON.stringify([]);\n    }\n\n    return JSON.parse(localStorage[key]);\n  },\n  setHighScore: function setHighScore() {\n    var key = gameName + game.HIGH_SCORES_SUFFIX,\n        highScoresString = localStorage;\n    highScores.unshift(highScore);\n    localStorage[key] = JSON.stringify(highScores);\n  },\n  clearHighScores: function clearHighScores() {\n    localStorage[game.gameName + this.HIGH_SCORES_SUFFIX] = JSON.stringify([]);\n  },\n  over: function over() {\n    var highScore = 0,\n        highScores = [{\n      score: 100\n    }, {\n      score: 75\n    }, {\n      score: 50\n    }];\n    var lastOnList = $('#highScoreList li').last().text();\n\n    if (highScores.length === 0 || game.score > highScores[0].score) {\n      // this.showHighScores();\n      game.highScoreToast.insertAfter('canvas');\n      game.highScoreToast.show();\n      $('#highScoreParagraph').html(game.score);\n    } else {\n      game.gameOverToast.insertAfter('canvas');\n      game.gameOverToast.show();\n      $('#highScoreParagraph').html(game.score);\n    }\n\n    $('#inputScore').val(game.score); // this.gameOver = true;\n    // this.lastScore = this.score;\n    // this.score = 0;\n  },\n  // High Scores ............................................................\n  showHighScores: function showHighScores() {\n    $(\"#highScoreParagraph\").show();\n    $(\"#highScoreParagraph\").text(this.score);\n    $(\"#highScoreToast\").text(this.score);\n    this.updateHighScoreList();\n  },\n  updateHighScoreList: function updateHighScoreList() {\n    var el,\n        highScores = game.getHighScores(),\n        length = highScores.length,\n        highScore,\n        listParent = highScoreList.parentNode;\n  },\n  drawScoreBox: function drawScoreBox() {\n    var text = 'SCORE: ' + this.score;\n    this.screen.fillText(text, this.gameSize.x * 0.075, this.gameSize.y * 0.050);\n    this.screen.fillStyle = 'white';\n    var fontHeight = this.gameSize.y * 0.0375;\n    this.screen.font = fontHeight + \"px Helvetica\";\n    this.screen.textAlign = 'left';\n    this.screen.textBaseline = 'top';\n  },\n  drawLivesLeftBox: function drawLivesLeftBox() {\n    var text = 'Lives: ' + this.playerLivesLeft;\n    this.screen.fillText(text, this.gameSize.x * 0.850, this.gameSize.y * 0.050);\n    this.screen.fillStyle = 'white';\n    var fontHeight = this.gameSize.y * 0.0375;\n    this.screen.font = fontHeight + \"px Helvetica\";\n    this.screen.textAlign = 'left';\n    this.screen.textBaseline = 'top';\n  }\n}; // end Game.prototype\n\nvar imageLoadedCallback = function imageLoadedCallback(e) {\n  this.imagesLoaded++;\n};\n\nvar imageLoadErrorCallback = function imageLoadErrorCallback(e) {\n  this.imagesFailedToLoad++;\n};\n\nvar loadImage = function loadImage(imageUrl) {\n  var image = new Image();\n  var self = this;\n  image.src = imageUrl;\n  image.addEventListener('load', function (e) {\n    self.imageLoadedCallback(e);\n  });\n  image.addEventListener('error', function (e) {\n    self.imageLoadErrorCallback(e);\n  });\n  this.images[imageUrl] = image;\n};\n\nvar loadImages = function loadImages() {\n  if (this.imagesIndex < this.imageUrls.length) {\n    this.loadImage(this.imageUrls[this.imagesIndex]);\n    this.imagesIndex++;\n  }\n\n  return (this.imagesLoaded + this.imagesFailedToLoad) / this.imageUrls.length * 100;\n}; // Call to add image to queue\n\n\nvar queueImage = function queueImage(imageUrl) {\n  this.imageUrls.push(imageUrl);\n};\n\nvar getImage = function getImage(imageUrl) {\n  return this.images[imageUrl];\n};\n\nvar Player = function Player(game, behavior, painter, gameSize) {\n  this.name = \"player\";\n  this.gameSize = gameSize;\n  this.behavior = behavior;\n  this.painter = painter;\n  this.game = game;\n  this.step_X = 4;\n  this.step_Y = 4;\n  this.dx = this.dy = 1.015;\n  this.animating = false;\n  this.remove = false;\n  this.visible = true;\n  this.radar = false;\n  this.size = getSpriteSize('player', this.gameSize);\n  this.center = {\n    x: gameSize.x / 2,\n    y: gameSize.y - 1.0 * this.size.y\n  };\n};\n\nPlayer.prototype = {\n  update: function update(time) {\n    //Loop through all behaviors\n    for (var i = 0; i < this.behavior.length; i++) {\n      this.behavior[i].execute(this, this.gameSize, time);\n    }\n\n    if (this.game.keyboarder.isDown(this.game.keyboarder.KEYS.LEFT)) {\n      this.step_X *= this.dx;\n      this.step_X = this.step_X > 8 ? 8 : this.step_X;\n      this.center.x = this.center.x < 0 - this.size.x / 2 ? this.game.gameSize.x : this.center.x;\n      this.center.x -= this.step_X;\n    }\n\n    if (this.game.keyboarder.isDown(this.game.keyboarder.KEYS.RIGHT)) {\n      this.step_X *= this.dx;\n      this.step_X = this.step_X > 8 ? 8 : this.step_X;\n      this.center.x = this.center.x > this.game.gameSize.x + this.size.x / 2 ? 0 : this.center.x;\n      this.center.x += this.step_X;\n    }\n\n    if (this.game.keyboarder.isDown(this.game.keyboarder.KEYS.UP)) {\n      this.step_Y *= this.dy;\n      this.step_Y = this.step_Y > 8 ? 8 : this.step_Y;\n      this.center.y = this.center.y > this.game.gameSize.y + this.size.y / 2 ? 0 : this.center.y;\n      this.center.y += this.step_Y;\n    }\n\n    if (this.game.keyboarder.isDown(this.game.keyboarder.KEYS.DOWN)) {\n      this.step_Y *= this.dy;\n      this.step_Y = this.step_Y > 8 ? 8 : this.step_Y;\n      this.center.y = this.center.y < 0 - this.size.y / 2 ? this.game.gameSize.y : this.center.y;\n      this.center.y -= this.step_Y;\n    }\n\n    if (this.game.keyboarder.isDown(this.game.keyboarder.KEYS.SPACE) && !this.game.gun_Locked) {\n      this.game.bulletCntr--;\n      this.game.gun_Locked = this.game.bulletCntr <= 0 ? true : false;\n      var missle = new Missle({\n        x: this.center.x,\n        y: this.center.y - this.size.y / 2\n      }, {\n        x: 0,\n        y: -this.gameSize.y * 0.0150\n      }, this.gameSize);\n      this.game.score -= 5;\n      this.game.addBody(missle);\n\n      try {\n        this.game.shootSound.load();\n        this.game.shootSound.play();\n      } catch (error) {\n        console.error('Error loading sound: ', error);\n      }\n    }\n  },\n  draw: function draw(screen, body) {\n    this.painter.draw(screen, body);\n  }\n};\n\nvar Invader = function Invader(game, center, behavior, painter, gameSize) {\n  this.name = \"invader\";\n  this.game = game;\n  this.gameSize = gameSize;\n  this.behavior = behavior;\n  this.painter = painter;\n  this.visible = true;\n  this.animating = false;\n  this.remove = false; // this.game.radar = false;\n\n  this.size = getSpriteSize('invader', this.gameSize);\n  this.center = center;\n  this.radians = 0.025;\n  this.totalRadians = 0;\n  this.scaleHeight = 1.5;\n  this.patrolX = 0;\n  this.speedX = gameSize.x * this.game.speedX_Val;\n};\n\nInvader.prototype = {\n  update: function update(time) {\n    var targetLocation = {};\n\n    for (var i = 0; i < this.behavior.length; i++) {\n      this.behavior[i].execute(this, this.gameSize, time);\n    }\n\n    this.visible = this.center.y > this.gameSize.y * 1.10 ? false : true;\n\n    if (Math.random() > this.game.invaderFireRate && !this.game.invadersBelow(this)) {\n      if (this.game.radar === true) {\n        targetLocation = radarGuidance(this.game.player, this, this.gameSize.y * 0.0075);\n      } else {\n        targetLocation = {\n          x: 0,\n          y: this.gameSize.y * 0.0075\n        };\n      }\n\n      var bullet = new Bullet({\n        x: this.center.x,\n        y: this.center.y + this.size.x / 2\n      }, targetLocation, this.gameSize);\n      this.game.addBody(bullet);\n\n      try {\n        this.game.alienShootSound.load();\n        this.game.alienShootSound.play();\n      } catch (error) {\n        console.error('Error adding alienShootSound: ', error);\n      }\n    }\n  },\n  draw: function draw(screen, body) {\n    this.painter.draw(screen, body);\n  }\n};\n\nvar createInvaders = function createInvaders(game, gameSize, behavior, invaderImage, row, col) {\n  this.game = game;\n  var invaders = [],\n      fleetWidth = 0,\n      size = {};\n  size = getSpriteSize('invader', gameSize);\n  fleetWidth = 2 * col * size.x;\n  this.game.fleetPatrol_X = (gameSize.x - fleetWidth) / 2; // console.log(\"this.game.fleetPatrol_X: \",this.game.fleetPatrol_X);\n\n  for (var i = 0; i < row * col; i++) {\n    var x = this.game.fleetPatrol_X + i % col * (gameSize.x * 0.075);\n    var y = gameSize.y * 0.075 + i % row * (gameSize.y * 0.075);\n    invaders.push(new Invader(game, {\n      x: x,\n      y: y\n    }, [behavior, new CycleImages(16, 32)], new SpritePainter([invaderImage]), gameSize));\n  }\n\n  return invaders;\n};\n\nvar getSpriteSize = function getSpriteSize(spriteName, gameSize) {\n  var size = {}; // not const\n  // TODO: Clean this up and figure out what kind oa screen the user has open\n  // 4:3 16:9 : 21:9 etc. and scale the images from there.\n\n  if (spriteName === 'player') {\n    if (gameSize.x > 1400) {\n      size = {\n        x: gameSize.x * 0.050,\n        y: gameSize.x * 0.0750\n      };\n    } else if (gameSize.x > 1024) {\n      size = {\n        x: gameSize.x * 0.060,\n        y: gameSize.x * 0.090\n      };\n    } else if (gameSize.x > 768) {\n      size = {\n        x: gameSize.x * 0.075,\n        y: gameSize.x * 0.1125\n      };\n    } else if (gameSize.x > 401) {\n      size = {\n        x: gameSize.x * 0.100,\n        y: gameSize.x * 0.150\n      };\n    } else {\n      size = {\n        x: 20,\n        y: 20\n      }; // x: 15, y: 15\n    }\n  } else if (spriteName === 'invader') {\n    if (gameSize.x > 1400) {\n      size = {\n        x: gameSize.x * 0.0325,\n        y: gameSize.x * 0.0325\n      };\n    } else if (gameSize.x > 1024) {\n      size = {\n        x: gameSize.x * 0.0375,\n        y: gameSize.x * 0.0375\n      };\n    } else if (gameSize.x > 768) {\n      size = {\n        x: gameSize.x * 0.0425,\n        y: gameSize.x * 0.0425\n      };\n    } else if (gameSize.x > 401) {\n      size = {\n        x: gameSize.x * 0.0525,\n        y: gameSize.x * 0.0525\n      };\n    } else {\n      size = {\n        x: 20,\n        y: 20\n      }; // x: 15, y: 15\n    }\n  } else if (spriteName === 'missle') {\n    if (gameSize.x > 1024) {\n      size = {\n        x: 15,\n        y: 25\n      };\n    } else if (gameSize.x > 768) {\n      size = {\n        x: 10,\n        y: 16\n      };\n    } else if (gameSize.x > 401) {\n      size = {\n        x: 6,\n        y: 10\n      };\n    } else {\n      size = {\n        x: 4,\n        y: 7\n      }; // x: 15, y: 15\n    }\n  } else if (spriteName === 'bullet') {\n    if (gameSize.x > 1024) {\n      size = {\n        x: 15,\n        y: 15\n      };\n    } else if (gameSize.x > 768) {\n      size = {\n        x: 12,\n        y: 12\n      };\n    } else if (gameSize.x > 401) {\n      size = {\n        x: 8,\n        y: 8\n      };\n    } else {\n      size = {\n        x: 4,\n        y: 4\n      }; // x: 15, y: 15\n    }\n  }\n\n  return size;\n}; // Movements the aliens take\n\n\nvar rightToLeft = {\n  execute: function execute(body, gameSize) {\n    if (body.patrolX < -body.game.fleetPatrol_X || body.patrolX > body.game.fleetPatrol_X) {\n      body.speedX = -body.speedX; // Drops down after every patrol\n\n      body.center.y += body.size.y * 2.5; // body.speedX += body.speedX;\n    }\n\n    body.center.x += body.speedX;\n    body.patrolX += body.speedX;\n  }\n}; // Aliens will follow a  sinewave or snake patternp  \n\nvar sineWave = {\n  execute: function execute(body, gameSize) {\n    // console.log(\"In sineWave execute's this: %j\", body)\n    if (body.patrolX < -body.game.fleetPatrol_X || body.patrolX > body.game.fleetPatrol_X) {\n      body.speedX = -body.speedX;\n      body.radians = -body.radians; // Drops down after every patrol\n\n      body.center.y += body.size.y; // body.speedX += body.speedX;\n    }\n\n    body.totalRadians += body.radians;\n    body.center.x += body.speedX;\n    body.patrolX += body.speedX;\n    body.center.y += body.scaleHeight * Math.sin(body.totalRadians);\n  }\n};\nvar halfCircle = {\n  execute: function execute(body, gameSize) {\n    if (body.patrolX < -body.game.fleetPatrol_X || body.patrolX > body.game.fleetPatrol_X) {\n      body.speedX = -body.speedX; // body.radians = -body.radians;\n      // Drops down after every patrol\n\n      body.center.y += body.size.y;\n    }\n\n    body.totalRadians += body.radians * 0.5;\n    body.center.x += body.speedX;\n    body.patrolX += body.speedX;\n    body.center.y += body.scaleHeight * Math.sin(body.totalRadians);\n  }\n};\nvar dropDiagonal = {\n  execute: function execute(body, gameSize) {\n    if (body.patrolX < -body.game.fleetPatrol_X || body.patrolX > body.game.fleetPatrol_X) {\n      body.speedX = -body.speedX; // body.radians = -body.radians;\n      // Drops down after every patrol\n\n      body.center.y += body.size.y;\n    }\n\n    body.center.x += body.speedX;\n    body.patrolX += body.speedX;\n    body.center.y += body.speedX * 0.5;\n  }\n};\n\nvar Bullet = function Bullet(center, velocity, gameSize) {\n  this.gameSize = gameSize;\n  this.center = center;\n  this.velocity = velocity;\n  this.visible = true;\n  this.remove = false;\n  this.size = getSpriteSize('bullet', gameSize);\n};\n\nBullet.prototype = {\n  update: function update() {\n    this.center.x += this.velocity.x;\n    this.center.y += this.velocity.y; // If the bullet moves off the board\n    // set to visible = false\n\n    if (this.center.y < 0 - this.gameSize.y * 0.10 || this.center.y > this.gameSize.y * 1.10 || this.center.x < 0 - this.gameSize.x * 0.10 || this.center.x > this.gameSize.x * 1.10) {\n      this.visible = false;\n    }\n  },\n  draw: function draw(screen, body) {\n    screen.drawImage(game.enemy_bulletImg, body.center.x - body.size.x / 2, body.center.y - body.size.y / 2, body.size.x, body.size.y);\n  }\n};\n\nvar Missle = function Missle(center, velocity, gameSize) {\n  this.gameSize = gameSize; // this.size = { x: 15, y: 25 };\n\n  this.size = getSpriteSize('missle', gameSize);\n  this.center = center;\n  this.velocity = velocity;\n  this.visible = true;\n  this.remove = false;\n};\n\nMissle.prototype = {\n  update: function update() {\n    this.center.x += this.velocity.x;\n    this.center.y += this.velocity.y; // If the Missle moves off the board\n    // set visible to fasle\n\n    if (this.center.y < 0 - this.gameSize.y * 0.10 || this.center.y > this.gameSize.y * 1.10 || this.center.x < 0 - this.gameSize.x * 0.10 || this.center.x > this.gameSize.x * 1.10) {\n      this.visible = false;\n    }\n  },\n  draw: function draw(screen, body) {\n    screen.drawImage(game.missleImg, body.center.x - body.size.x / 2, body.center.y - body.size.y / 2, body.size.x, body.size.y);\n  }\n};\n\nvar Keyboarder = function Keyboarder(game) {\n  var keyState = {}; // not const\n\n  window.onkeydown = function (e) {\n    keyState[e.keyCode] = true;\n    game.keyPressed(e);\n  };\n\n  window.onkeyup = function (e) {\n    keyState[e.keyCode] = false;\n    game.keyUp(e);\n  };\n\n  this.isDown = function (keyCode) {\n    return keyState[keyCode] === true;\n  };\n\n  this.KEYS = {\n    LEFT: 37,\n    RIGHT: 39,\n    UP: 40,\n    DOWN: 38,\n    SPACE: 32,\n    P: 80\n  };\n}; // Detect collisions\n\n\nvar colliding = function colliding(b1, b2) {\n  return !(b1 === b2 || b1 instanceof Player && b2 instanceof Missle || b1 instanceof Missle && b2 instanceof Player || b1 instanceof Bullet && b2 instanceof Bullet || b1 instanceof Missle && b2 instanceof Missle || b1 instanceof Invader && b2 instanceof Invader || b1 instanceof Bullet && b2 instanceof Missle || b1 instanceof Missle && b2 instanceof Bullet || b1 instanceof Invader && b2 instanceof Bullet || b1 instanceof Bullet && b2 instanceof Invader || b1.center.x + b1.size.x / 2 < b2.center.x - b2.size.x / 2 || b1.center.y + b1.size.y / 2 < b2.center.y - b2.size.y / 2 || b1.center.x - b1.size.x / 2 > b2.center.x + b2.size.x / 2 || b1.center.y - b1.size.y / 2 > b2.center.y + b2.size.y / 2);\n};\n\nvar togglePaused = function togglePaused() {\n  if (!this.paused) {\n    game.pausedToast && game.pausedToast.insertAfter('canvas');\n    game.pausedToast && game.pausedToast.show();\n  } else {\n    $('#pausedToast').detach();\n  }\n\n  this.paused = !this.paused;\n};\n\nvar loadSound = function loadSound(url, callback) {\n  var loaded = function loaded() {\n    callback(sound);\n    sound.removeEventListener('canplaythrough', loaded);\n  };\n\n  var sound = new Audio(url);\n  sound.addEventListener('canplaythrough', loaded);\n  sound.load();\n};\n\nvar SpritePainter = function SpritePainter(images) {\n  this.images = images;\n  this.imagesIndex = 0;\n};\n\nvar radarGuidance = function radarGuidance(shooter, target, velocity) {\n  var rev = -1,\n      dx = shooter.center.x - target.center.x,\n      dy = shooter.center.y - target.center.y,\n      theta = Math.atan(dy / dx);\n  if (target.center.x < shooter.center.x && target.center.y > shooter.center.y) rev = 1;else if (target.center.x < shooter.center.x && target.center.y < shooter.center.y) rev = 1;\n  var velocity_Dx = rev * velocity * Math.cos(theta),\n      velocity_Dy = rev * velocity * Math.sin(theta);\n  return {\n    x: velocity_Dx,\n    y: velocity_Dy\n  };\n};\n\nSpritePainter.prototype = {\n  advance: function advance(body) {\n    if (this.imagesIndex === this.images.length - 1) {\n      this.imagesIndex = 0;\n    } else {\n      this.imagesIndex++;\n    }\n  },\n  draw: function draw(screen, body) {\n    var spriteImage = this.images[this.imagesIndex];\n    screen.drawImage(spriteImage, body.center.x - body.size.x / 2, body.center.y - body.size.y / 2, body.size.x, body.size.y);\n  }\n};\n\nvar ExplosionSpritePainter = function ExplosionSpritePainter(images, kindOfBody) {\n  this.images = images;\n  this.imagesIndex = 0;\n  this.kindOfBody = kindOfBody ? kindOfBody : null;\n};\n\nExplosionSpritePainter.prototype = {\n  advance: function advance(body) {\n    // Last image so reset everything here\n    if (this.imagesIndex === this.images.length - 1) {\n      if (this.kindOfBody === 'Invader') {\n        body.remove = true;\n        body.visible = false;\n        body.animating = false;\n      } else if (this.kindOfBody === 'Player') {\n        body.remove = false;\n        body.visible = true;\n        body.animating = false;\n        body.name = 'player';\n        body.size.x /= game.playerLivesLeft ? 2.5 : 6.0;\n        body.size.y /= game.playerLivesLeft ? 2.5 : 6.0; // Player still alive then put them back on the canvas\n\n        if (game.playerLivesLeft > 0 && game.playerStatus === 'DEAD') {\n          body.painter = new SpritePainter([game.playerImg]);\n          game.playerStatus = 'ALIVE';\n        }\n      } else {\n        body.remove = true;\n        body.visible = false;\n        body.animating = false;\n      }\n    } else {\n      this.imagesIndex++;\n    }\n  },\n  draw: function draw(screen, body) {\n    var spriteImage = this.images[this.imagesIndex];\n    body.animating = true;\n\n    try {\n      screen.drawImage(spriteImage, body.center.x - body.size.x / 2, body.center.y - body.size.y / 2, body.size.x, body.size.y);\n    } catch (error) {\n      // statements to handle any exceptions\n      console.warn('Error writing spite to screen ', error); // pass exception object to error handler\n    }\n  }\n};\n\nvar CycleImages = function CycleImages(frameCnt, PAGE_FLIP_INTERVAL) {\n  this.frameCounter = 0;\n  this.frameCnt = frameCnt;\n  this.lastAdvance = 0;\n  this.PAGE_FLIP_INTERVAL = PAGE_FLIP_INTERVAL;\n};\n\nCycleImages.prototype = {\n  execute: function execute(body, gameSize, time) {\n    if (time - this.lastAdvance > this.PAGE_FLIP_INTERVAL) {\n      body.painter.advance(body);\n      this.lastAdvance = time;\n    }\n  }\n};\n/* We store level data here in an array of  objects\n * @speedX - speed of Invaders\n * @behavior - what pattern do the Invader take on the screen\n * @row & @col how many are on the screen \n * @backgroundImg placeholder obj for background image.\n * @invaderFireRate only small percentage is needed > 10%\n * @invaderHits number of hits to kill an Invader -- For future use.\n*/\n// TODO: Make this a DB Mongo, MySql, or Postgres call who knows???\n\nvar levelData = [{\n  speedX: 0.0020,\n  behavior: sineWave,\n  invaderImage: {},\n  row: 2,\n  col: 7,\n  backgroundImg: {},\n  invaderFireRate: 0.995,\n  invaderHits: 1\n}, {\n  speedX: 0.0020,\n  behavior: halfCircle,\n  invaderImage: {},\n  row: 3,\n  col: 7,\n  backgroundImg: {},\n  invaderFireRate: 0.995,\n  invaderHits: 1\n}, {\n  speedX: 0.0022,\n  behavior: rightToLeft,\n  invaderImage: {},\n  row: 4,\n  col: 7,\n  backgroundImg: {},\n  invaderFireRate: 0.994,\n  invaderHits: 1\n}, {\n  speedX: 0.00225,\n  behavior: dropDiagonal,\n  invaderImage: {},\n  row: 5,\n  col: 7,\n  backgroundImg: {},\n  invaderFireRate: 0.994,\n  invaderHits: 1\n}]; // We create a new game here\n\nvar game = new Game(\"Defender\", \"screen\"); // Pause the game\n\ngame.addKeyListener({\n  key: 'p',\n  listener: function listener() {\n    game.togglePaused();\n  }\n}); // Position the Player back at the start\n\ngame.addKeyListener({\n  key: 'c',\n  listener: function listener() {\n    game.player.center = {\n      x: game.gameSize.x / 2,\n      y: game.gameSize.y - 1.0 * game.player.size.y\n    };\n  }\n}); // THE Hyperspace button to to get out of a TOUGH JAM?\n// Maybe LOL!!! It is random positioning\n// Had to use \"s\" as \"h\" my preferred key and \"x\" are\n// somehow intercepted by the browser.\n\ngame.addKeyListener({\n  key: 's',\n  listener: function listener() {\n    game.player.center = {\n      x: game.gameSize.x * Math.random(),\n      y: game.gameSize.y * Math.random() - game.player.size.y\n    };\n  }\n});\ngame.addKeyListener({\n  key: 'spacebar',\n  listener: function listener() {\n    // reset counter for bullets\n    // When spacebar comes up\n    // keyUp() uses this function\n    setTimeout(function () {\n      game.gun_Locked = false;\n    }, 200);\n\n    if (self.gameOver) {\n      window.location.reload();\n    }\n\n    if (game.paused && !self.gameOver) {\n      game.togglePaused();\n    }\n  }\n}); // Reset these when the arrow keys come UP\n\ngame.addKeyListener({\n  key: 'left arrow',\n  listener: function listener() {\n    game.player.step_X = 4;\n  }\n});\ngame.addKeyListener({\n  key: 'right arrow',\n  listener: function listener() {\n    game.player.step_X = 4;\n  }\n});\ngame.addKeyListener({\n  key: 'up arrow',\n  listener: function listener() {\n    game.player.step_Y = 4;\n  }\n});\ngame.addKeyListener({\n  key: 'down arrow',\n  listener: function listener() {\n    game.player.step_Y = 4;\n  }\n});\n$('#pausedToast').on('click', function (e) {\n  game.togglePaused();\n});\n$('.newGameButton, .closeHighScoreToast').on('click', function (e) {\n  // console.log('game.start();');\n  // Get the reset() working later\n  // game.reset();\n  // game.start();\n  // window.location.reload(); // inconsistent\n  window.location.href = window.location.origin;\n});\n$('#newGameFromHighScore.newGame').on('click', function (e) {\n  window.location.href = window.location.origin;\n});\n$(window).on('blur', function () {\n  if (!game.gameOver && !game.paused) {\n    game.togglePaused();\n  }\n});\n$(window).on('focus', function () {\n  if (game.paused) {\n    game.togglePaused();\n  }\n}); // Queue Images here\n// Level Background Images\n\ngame.queueImage(\"/images/Space_1_slice.jpg\");\ngame.queueImage(\"/images/Milky_Way.jpg\");\ngame.queueImage(\"/images/Galaxy.jpg\");\ngame.queueImage(\"/images/Space_1.jpg\"); // game.queueImage(\"/images/\");\n\ngame.queueImage(\"/images/Starships/starships_0007_Ex-ving.png\");\ngame.queueImage(\"/images/missle.png\"); //  Queue Alien ships\n\ngame.queueImage(\"/images/Starships/starships_0006_Bow-fighter_Rev.png\");\ngame.queueImage(\"/images/Starships/starships_0004_Ice-Speedster_Rev.png\");\ngame.queueImage(\"/images/Starships/starships_0005_Centenial-Hawk_Rev.png\");\ngame.queueImage(\"/images/Starships/starships_0001_Sun-killer_Rev.png\");\ngame.queueImage(\"/images/enemy-bullet.png\"); // Explosion Images\n\ngame.queueImage(\"/images/img/explode_1.png\");\ngame.queueImage(\"/images/img/explode_2.png\");\ngame.queueImage(\"/images/img/explode_3.png\");\ngame.queueImage(\"/images/img/explode_4.png\");\ngame.queueImage(\"/images/img/explode_5.png\");\ngame.queueImage(\"/images/img/explode_6.png\");\ngame.queueImage(\"/images/img/explode_7.png\");\ngame.queueImage(\"/images/img/explode_8.png\");\ngame.queueImage(\"/images/img/explode_9.png\");\ngame.queueImage(\"/images/img/explode_10.png\");\ngame.queueImage(\"/images/img/explode_11.png\");\ngame.queueImage(\"/images/img/explode_12.png\");\ngame.queueImage(\"/images/img/explode_13.png\");\ngame.queueImage(\"/images/img/explode_14.png\");\ngame.queueImage(\"/images/img/explode_15.png\");\ngame.queueImage(\"/images/img/explode_16.png\"); /////////////////////////////////////////////\n\ninterval = setInterval(function () {\n  var loadingPercentComplete = game.loadImages(); // console.log('loading Percentage Completed: ', loadingPercentComplete);\n\n  if (loadingPercentComplete === 100) {\n    console.log(\"loading ... 100% Complete: OK!!!\");\n    clearInterval(interval);\n  } // We MUST Load ALL these Images here\n\n\n  game.backgroundImg = game.getImage(\"/images/Space_1_slice.jpg\");\n  game.playerImg = game.getImage(\"/images/Starships/starships_0007_Ex-ving.png\");\n  game.missleImg = game.getImage(\"/images/missle.png\");\n  game.enemy_bulletImg = game.getImage(\"/images/enemy-bullet.png\"); // Load Alien ships into level obj's\n  // TODO: Load all but first later\n\n  game.levelData[0].invaderImage = game.getImage(\"/images/Starships/starships_0006_Bow-fighter_Rev.png\");\n  game.levelData[1].invaderImage = game.getImage(\"/images/Starships/starships_0004_Ice-Speedster_Rev.png\");\n  game.levelData[2].invaderImage = game.getImage(\"/images/Starships/starships_0005_Centenial-Hawk_Rev.png\");\n  game.levelData[3].invaderImage = game.getImage(\"/images/Starships/starships_0001_Sun-killer_Rev.png\"); // TODO: Load all but first later\n\n  game.levelData[0].backgroundImg = game.getImage(\"/images/Space_1_slice.jpg\");\n  game.levelData[1].backgroundImg = game.getImage(\"/images/Milky_Way.jpg\");\n  game.levelData[2].backgroundImg = game.getImage(\"/images/Galaxy.jpg\");\n  game.levelData[3].backgroundImg = game.getImage(\"/images/Space_1.jpg\"); // Load Explosion Images\n  // These are inline/loop-unrolled for faster loading\n\n  game.tmp1 = game.getImage(\"/images/img/explode_1.png\");\n  game.tmp2 = game.getImage(\"/images/img/explode_2.png\");\n  game.tmp3 = game.getImage(\"/images/img/explode_3.png\");\n  game.tmp4 = game.getImage(\"/images/img/explode_4.png\");\n  game.tmp5 = game.getImage(\"/images/img/explode_5.png\");\n  game.tmp6 = game.getImage(\"/images/img/explode_6.png\");\n  game.tmp7 = game.getImage(\"/images/img/explode_7.png\");\n  game.tmp8 = game.getImage(\"/images/img/explode_8.png\");\n  game.tmp9 = game.getImage(\"/images/img/explode_9.png\");\n  game.tmp10 = game.getImage(\"/images/img/explode_10.png\");\n  game.tmp11 = game.getImage(\"/images/img/explode_11.png\");\n  game.tmp12 = game.getImage(\"/images/img/explode_12.png\");\n  game.tmp13 = game.getImage(\"/images/img/explode_13.png\");\n  game.tmp14 = game.getImage(\"/images/img/explode_14.png\");\n  game.tmp15 = game.getImage(\"/images/img/explode_15.png\");\n  game.tmp16 = game.getImage(\"/images/img/explode_16.png\");\n}, 16); /////////////////////////////////////////////////\n// const loadToastTitle = document.getElementById(\"loadToastTitle\");\n// Hide Canvas\n\n$('#screen').hide(); // click to start game\n\n$('#loadButton').on('click', function (e) {\n  /* Hide HTML using CSS\n   * Classes are used for speed\n   * to reduce page flicker \n   * jQuery for convenience */\n  $('#pausedToast').removeClass('hide');\n  $('#scoreToast').removeClass('hide');\n  $('#progressbar').removeClass('hide');\n  $('#gameOverToast').removeClass('hide');\n  $('#highScoreToast').removeClass('hide'); // detach and cache HTML snippet\n\n  game.loadingToast = $('#loadingToast').detach();\n  game.pausedToast = $('#pausedToast').detach();\n  game.progressbar = $('#progressbar').detach();\n  game.gameOverToast = $('#gameOverToast').detach();\n  game.highScoreToast = $('#highScoreToast').detach();\n  $('#screen').show(); // loadToastTitle.style.display = \"none\";\n  // $('loadToastTitle').hide()\n  // $('#loadToastTitle').css(\"display\", \"none\");\n\n  game.explosionImages.push(game.tmp1, game.tmp2, game.tmp3, game.tmp4, game.tmp5, game.tmp6, game.tmp7, game.tmp8, game.tmp9, game.tmp10, game.tmp11, game.tmp12, game.tmp13, game.tmp14, game.tmp15, game.tmp16); // game.loadLevel(0);\n\n  e.preventDefault(); // Delay start of game to make sure all assets have loaded\n  // TODO change to a promise/callback\n\n  setTimeout(function () {\n    game.start();\n  }, 250);\n});\nvar gScore = game.score;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jbGllbnQvc3JjL2dhbWUuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9jbGllbnQvc3JjL2dhbWUuanM/MjQyNCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcGFjZV9kZWZlbmRlci5qc1xuXG4vLyBUT0RPOiBCcmVhayBpbnRvIE1vZHVsZXNcbi8vIFRPRE8gRml4IEF1ZGlvIFBsYXkgRXJyb3Jcbi8vIFNlZSBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS93ZWIvdXBkYXRlcy8yMDE3LzA2L3BsYXktcmVxdWVzdC13YXMtaW50ZXJydXB0ZWRcblxuY29uc29sZS53YXJuKFwiRGVmZW5kZXIgUnVubmluZyAuLi5cIik7XG5cbiAgICBjb25zdCBHYW1lID0gZnVuY3Rpb24oZ2FtZU5hbWUsIGNhbnZhc0lkKSB7XG4gICAgICAgIGNvbnN0ICBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjYW52YXNJZCk7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiZ2FtZU5hbWU6IFwiLCBnYW1lTmFtZSk7XG5cbiAgICAgICAgY29uc3QgIHdpZHRoID0gJCh3aW5kb3cpLndpZHRoKCk7XG4gICAgICAgIGNvbnN0ICBoZWlnaHQgPSAkKHdpbmRvdykuaGVpZ2h0KCk7XG5cbiAgICAgICAgY29uc29sZS5sb2coXCJ3aWR0aDogXCIsIHdpZHRoKTtcbiAgICAgICAgY29uc29sZS5sb2coXCJoZWlnaHQ6IFwiLCBoZWlnaHQpO1xuXG4gICAgICAgIGNhbnZhcy53aWR0aCA9IHdpZHRoO1xuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xuXG4gICAgICAgIHRoaXMuc2NyZWVuID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgICAgIHRoaXMuZ2FtZVNpemUgPSB7IHg6IGNhbnZhcy53aWR0aCwgeTogY2FudmFzLmhlaWdodCB9O1xuICAgICAgICBjb25zdCAgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgdGhpcy4ga2V5TGlzdGVuZXJzID0gW107XG5cbiAgICAgICAgdGhpcy5idWxsZXRDbnRyID0gMjsgIFxuICAgICAgICB0aGlzLnNjb3JlID0gMDtcbiAgICAgICAgdGhpcy5ndW5fTG9ja2VkID0gZmFsc2U7IFxuICAgICAgICB0aGlzLmdhbWVPdmVyID0gZmFsc2U7XG4gICAgICAgIHRoaXMucGF1c2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuUEFVU0VEX1RJTUVPVVQgPSAxMDA7XG4gICAgICAgIHRoaXMuSElHSF9TQ09SRVNfU1VGRklYID0gJ19oaWdoU2NvcmVzJztcblxuICAgICAgICB0aGlzLmludmFkZXJGaXJlUmF0ZSA9IDAuOTk1O1xuICAgICAgICB0aGlzLmxldmVsID0gMDtcbiAgICAgICAgdGhpcy5mbGVldFBhdHJvbF9YID0gMDtcbiAgICAgICAgdGhpcy5sZXZlbERhdGEgID0gbGV2ZWxEYXRhO1xuXG4gICAgICAgIHRoaXMucGxheWVyID0ge307XG4gICAgICAgIHRoaXMucGxheWVyTGl2ZXNMZWZ0ID0gMztcbiAgICAgICAgdGhpcy5wbGF5ZXJTdGF0dXMgPSAnQUxJVkUnOyAgLy8gQUxJVkUgfCBERUFEXG4gICAgICAgIHRoaXMucmFkYXIgPSBmYWxzZTtcblxuICAgICAgICB0aGlzLmltYWdlTG9hZGluZ1Byb2dyZXNzQ2FsbGJhY2sgPSB7fTtcbiAgICAgICAgdGhpcy5pbWFnZXMgPSB7fTtcbiAgICAgICAgdGhpcy5pbWFnZVVybHMgPSBbXTtcbiAgICAgICAgdGhpcy5pbWFnZXNMb2FkZWQgPSAwO1xuICAgICAgICB0aGlzLmltYWdlc0ZhaWxlZFRvTG9hZCA9IDA7XG4gICAgICAgIHRoaXMuaW1hZ2VzSW5kZXggPSAwO1xuICAgICAgICBcbiAgICAgICAgLy8gSW1hZ2UgTWV0aG9kc1xuICAgICAgICB0aGlzLmdldEltYWdlID0gZ2V0SW1hZ2U7XG4gICAgICAgIHRoaXMuaW1hZ2VMb2FkZWRDYWxsYmFjayA9IGltYWdlTG9hZGVkQ2FsbGJhY2s7XG4gICAgICAgIHRoaXMuaW1hZ2VMb2FkRXJyb3JDYWxsYmFjayA9IGltYWdlTG9hZEVycm9yQ2FsbGJhY2s7XG4gICAgICAgIHRoaXMubG9hZEltYWdlID0gbG9hZEltYWdlO1xuICAgICAgICB0aGlzLmxvYWRJbWFnZXMgPSBsb2FkSW1hZ2VzO1xuICAgICAgICB0aGlzLnF1ZXVlSW1hZ2UgPSBxdWV1ZUltYWdlO1xuXG4gICAgICAgIC8vIExvYWQgYW5kIENhbGwgaW1hZ2VzXG4gICAgICAgIHRoaXMuYmFja2dyb3VuZEltZyA9IHt9O1xuICAgICAgICB0aGlzLmV4cGxvc2lvbkltYWdlcyA9IFtdO1xuICAgICAgICB0aGlzLnRvZ2dsZVBhdXNlZCA9IHRvZ2dsZVBhdXNlZDsgLy8gZnVuY3Rpb25cbiAgICAgICAgdGhpcy5rZXlib2FyZGVyID0gbmV3IEtleWJvYXJkZXIodGhpcyk7XG5cbiAgICAgICAgLy8gVG9kbyAtLS0gUHV0IHRoaXMgaW50byBhbiBvYmogdG8gdXNlIGFzIHNvdW5kID0+IHVybCBtYXBwaW5nXG4gICAgICAgIC8vIExvYWQgb3VyIHNvdW5kcyBoZXJlXG4gICAgICAgICBsb2FkU291bmQoXCIvc291bmRzL3JvY2tldC12ZXItMS53YXZcIiwgZnVuY3Rpb24gKHNob290U291bmQpIHtcbiAgICAgICAgICAgICBzZWxmLnNob290U291bmQgPSBzaG9vdFNvdW5kO1xuICAgICAgICAgfSk7XG5cbiAgICAgICAgIGxvYWRTb3VuZChcIi9zb3VuZHMvZXhwbG9zaW9uLXZlci0zLndhdlwiLCBmdW5jdGlvbiAoZXhwbG9zaW9uU291bmQpIHtcbiAgICAgICAgICAgICBzZWxmLmV4cGxvc2lvblNvdW5kID0gZXhwbG9zaW9uU291bmQ7XG4gICAgICAgICB9KTtcblxuICAgICAgICAgbG9hZFNvdW5kKFwiL3NvdW5kcy9BbGllbl9HdW4tdmVyLTEud2F2XCIsIGZ1bmN0aW9uIChhbGllblNob290U291bmQpIHtcbiAgICAgICAgICAgICBzZWxmLmFsaWVuU2hvb3RTb3VuZCA9IGFsaWVuU2hvb3RTb3VuZDtcblxuICAgICAgICAgfSk7XG5cbiAgICAgICAgc2VsZi5hbmltYXRlID0gZnVuY3Rpb24odGltZSkge1xuXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcImRlbHRhOiBcIiwgdGltZSAtIHNlbGYubGFzdFRpbWUpO1xuICAgICAgICAgICAgc2VsZi5sYXN0VGltZSA9IHRpbWU7XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5nYW1lT3Zlcil7XG4gICAgICAgICAgICAgICAgICAgIC8vIHNob3cgR2FtZSBPdmVyIERpYWxvZyBCb3ggSGVyZSEhXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2FtZU92ZXIgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgZ2FtZS5vdmVyKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiKioqKiogZ2FtZU92ZXI6ICoqKioqXCIpO1xuICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHNlbGYucGF1c2VkKXtcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShzZWxmLmFuaW1hdGUpO1xuICAgICAgICAgICAgICAgICAgICB9LCB0aGlzLlBBVVNFRF9USU1FT1VUKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgeyBcbiAgICAgICAgICAgICAgICAgICAgc2VsZi51cGRhdGUodGltZSk7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZHJhdyhzZWxmLnNjcmVlbiwgc2VsZi5nYW1lU2l6ZSk7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZHJhd1Njb3JlQm94KCk7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZHJhd0xpdmVzTGVmdEJveCgpO1xuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc2VsZi5hbmltYXRlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG59OyAvLyBlbmQgb2YgR2FtZSBjb25zdHJ1Y3RvclxuXG5HYW1lLnByb3RvdHlwZSA9IHtcblxuICAgIHN0YXJ0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgY29uc3QgIHNlbGYgPSB0aGlzO1xuICAgICAgICB0aGlzLmxvYWRMZXZlbCh0aGlzLmxldmVsKTtcbiAgICAgICAgdGhpcy5hbmltYXRlKCk7XG4gICAgfSxcbiAgICByZXNldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuYnVsbGV0Q250ciA9IDI7ICBcbiAgICAgICAgdGhpcy5zY29yZSA9IDA7XG4gICAgICAgIHRoaXMuZ3VuX0xvY2tlZCA9IGZhbHNlOyBcbiAgICAgICAgdGhpcy5nYW1lT3ZlciA9IGZhbHNlO1xuICAgICAgICB0aGlzLnBhdXNlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmludmFkZXJGaXJlUmF0ZSA9IDAuOTk1O1xuICAgICAgICB0aGlzLmxldmVsID0gMDtcbiAgICAgICAgdGhpcy5yYWRhciA9IGZhbHNlO1xuICAgICAgICB0aGlzLmJ1bGxldENudHIgPSAyMDsgIFxuICAgICAgICB0aGlzLmd1bl9Mb2NrZWQgPSBmYWxzZTsgXG4gICAgICAgIHRoaXMuZ2FtZU92ZXIgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wYXVzZWQgPSBmYWxzZTtcbiAgICB9LFxuXG4gICAgdXBkYXRlOiBmdW5jdGlvbih0aW1lKSB7XG4gICAgICAgIGNvbnN0IGJvZGllcyA9IHRoaXMuYm9kaWVzO1xuICAgICAgICBjb25zdCB0ZW1wQm9kaWVzID0gWy4uLmJvZGllc107XG5cbiAgICAgICBjb25zdCBpc0NvbGxpZGluZ1dpdGhTb21ldGhpbmcgPSBmdW5jdGlvbihiMSkge1xuICAgICAgICAgICAgcmV0dXJuIHRlbXBCb2RpZXMuZmlsdGVyKGZ1bmN0aW9uKGIyKSB7IHJldHVybiBjb2xsaWRpbmcoYjEsIGIyKTsgfSkubGVuZ3RoID4gMDsgXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgZmlsdGVyZWRCb2RpZXMgPSB0ZW1wQm9kaWVzLmZpbHRlcihpc0NvbGxpZGluZ1dpdGhTb21ldGhpbmcpO1xuICAgICAgICBjb25zdCBpbnZhZGVyRmlsdGVyZWRCb2RpZXMgPSBbXTtcbiAgICAgICAgY29uc3QgcGxheWVyRmlsdGVyZWRCb2RpZXMgPSBbXTtcblxuICAgICAgICAvLyBGaWx0ZXIgZm9yIGJvdGggdXNpbmcgJ2ZvciBsb29wJ1xuICAgICAgICAvLyBUaGlzIGlzIG11Y2ggZmFzdGVyIHRoYW4gdGhlIHNsb3dlciBhcnJheSBmaWx0ZXIgbWV0aG9kXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmlsdGVyZWRCb2RpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHVua25vd25GaWx0ZXJlZEJvZHkgPSBmaWx0ZXJlZEJvZGllc1tpXTtcblxuICAgICAgICAgICAgaWYgKHVua25vd25GaWx0ZXJlZEJvZHkgaW5zdGFuY2VvZiBJbnZhZGVyKSB7XG4gICAgICAgICAgICAgICAgaW52YWRlckZpbHRlcmVkQm9kaWVzLnB1c2godW5rbm93bkZpbHRlcmVkQm9keSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHVua25vd25GaWx0ZXJlZEJvZHkgaW5zdGFuY2VvZiBQbGF5ZXIpIHtcbiAgICAgICAgICAgICAgICBwbGF5ZXJGaWx0ZXJlZEJvZGllcy5wdXNoKHVua25vd25GaWx0ZXJlZEJvZHkpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGludmFkZXJGaWx0ZXJlZEJvZGllcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGludmFkZXJGaWx0ZXJlZEJvZGllc1tpXS5uYW1lID09PSBcImludmFkZXJcIikge1xuICAgICAgICAgICAgICAgIHRoaXMuc2NvcmUgKz0gMTAwICogKHRoaXMuZ2V0TGV2ZWwoKSArIDEpO1xuXG4gICAgICAgICAgICAgICAgaW52YWRlckZpbHRlcmVkQm9kaWVzW2ldLnBhaW50ZXIgPSBuZXcgRXhwbG9zaW9uU3ByaXRlUGFpbnRlcihnYW1lLmV4cGxvc2lvbkltYWdlcywgJ0ludmFkZXInKTtcbiAgICAgICAgICAgICAgICBpbnZhZGVyRmlsdGVyZWRCb2RpZXNbaV0ubmFtZSA9IFwiZXhwbG9zaW9uXCI7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leHBsb3Npb25Tb3VuZC5sb2FkKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXhwbG9zaW9uU291bmQucGxheSgpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHdpdGggbG9hZGluZyAmIHBsYXlpbmcgc291bmQ6ICcsIGVycm9yKTsgLy8gcGFzcyBleGNlcHRpb24gb2JqZWN0IHRvIGVycm9yIGhhbmRsZXJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaW52YWRlckZpbHRlcmVkQm9kaWVzW2ldLnNpemUueCA9IGludmFkZXJGaWx0ZXJlZEJvZGllc1tpXS5zaXplLnggKiAyLjU7XG4gICAgICAgICAgICAgICAgaW52YWRlckZpbHRlcmVkQm9kaWVzW2ldLnNpemUueSA9IGludmFkZXJGaWx0ZXJlZEJvZGllc1tpXS5zaXplLnkgKiAyLjU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBsYXllckZpbHRlcmVkQm9kaWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAocGxheWVyRmlsdGVyZWRCb2RpZXNbaV0ubmFtZSA9PT0gXCJwbGF5ZXJcIikge1xuICAgICAgICAgICAgICAgIC8vIElmIHBsYXllciBpcyBzdGlsbCBhbGl2ZSBzZXQgaGltIHRvIGRlYWQgaGUganVzdCBnb3Qga2lsbGVkIExPTFxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBsYXllclN0YXR1cyA9PT0gJ0FMSVZFJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYXllclN0YXR1cyA9ICdERUFEJztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXJMaXZlc0xlZnQtLTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcGxheWVyRmlsdGVyZWRCb2RpZXNbaV0ubmFtZSA9IFwiZXhwbG9zaW9uXCI7XG4gICAgICAgICAgICAgICAgcGxheWVyRmlsdGVyZWRCb2RpZXNbaV0ucGFpbnRlciA9IG5ldyBFeHBsb3Npb25TcHJpdGVQYWludGVyKGdhbWUuZXhwbG9zaW9uSW1hZ2VzLCAnUGxheWVyJyk7XG5cbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4cGxvc2lvblNvdW5kLmxvYWQoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leHBsb3Npb25Tb3VuZC5wbGF5KCk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigpOygnRXJyb3Igd2l0aCBsb2FkaW5nICYgcGxheWluZyBzb3VuZDogJywgZXJyb3IpOyAvLyBwYXNzIGV4Y2VwdGlvbiBvYmplY3QgdG8gZXJyb3IgaGFuZGxlclxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IGltYWdlc1NpemVNdWx0aXBsaWVyID0gdGhpcy5wbGF5ZXJMaXZlc0xlZnQgPyAyLjUgOiA2LjA7XG5cbiAgICAgICAgICAgICAgICBwbGF5ZXJGaWx0ZXJlZEJvZGllc1tpXS5zaXplLnggPSBwbGF5ZXJGaWx0ZXJlZEJvZGllc1tpXS5zaXplLnggKiBpbWFnZXNTaXplTXVsdGlwbGllcjtcbiAgICAgICAgICAgICAgICBwbGF5ZXJGaWx0ZXJlZEJvZGllc1tpXS5zaXplLnkgPSBwbGF5ZXJGaWx0ZXJlZEJvZGllc1tpXS5zaXplLnkgKiBpbWFnZXNTaXplTXVsdGlwbGllcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG5vdENvbGxpZGluZ1dpdGhBbnl0aGluZyA9IGZ1bmN0aW9uKGIxKSB7XG4gICAgICAgICAgICByZXR1cm4gYm9kaWVzLmZpbHRlcihmdW5jdGlvbihiMikgeyByZXR1cm4gY29sbGlkaW5nKGIxLCBiMik7IH0pLmxlbmd0aCA9PT0gMDsgXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5ib2RpZXMgPSB0aGlzLmJvZGllcy5maWx0ZXIobm90Q29sbGlkaW5nV2l0aEFueXRoaW5nKTtcblxuICAgICAgICAvLyBBcmUgYWxsIEludmFkZXJzIGFyZSBkZXN0cm95ZWQgXG4gICAgICAgIGNvbnN0IGludmFkZXJzTGVmdEFsaXZlID0gdGhpcy5ib2RpZXMuZmlsdGVyKGZ1bmN0aW9uKHVua25vd25Cb2R5KSB7XG4gICAgICAgICAgICByZXR1cm4gdW5rbm93bkJvZHkgaW5zdGFuY2VvZiBJbnZhZGVyO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoaW52YWRlcnNMZWZ0QWxpdmUubGVuZ3RoIDwgNSAmJiBpbnZhZGVyc0xlZnRBbGl2ZS5sZW5ndGggPj0gMyl7XG4gICAgICAgICAgICB0aGlzLmludmFkZXJGaXJlUmF0ZSA9IDAuOTg7XG4gICAgICAgICAgICAvLyBSYWRhciBpcyBvbiBhbmQgc3RheXMgb24gZnJvbSBoZXJlIG9uIHRoaXMgbGV2ZWxcbiAgICAgICAgICAgIHRoaXMucmFkYXIgPSB0cnVlO1xuICAgICAgICB9IGVsc2UgIGlmIChpbnZhZGVyc0xlZnRBbGl2ZS5sZW5ndGggPCAzICYmIGludmFkZXJzTGVmdEFsaXZlLmxlbmd0aCA+PSAyKXtcbiAgICAgICAgICAgIHRoaXMuaW52YWRlckZpcmVSYXRlID0gMC45NjtcbiAgICAgICAgfSBlbHNlIGlmIChpbnZhZGVyc0xlZnRBbGl2ZS5sZW5ndGggPCAyKSB7XG4gICAgICAgICAgICB0aGlzLmludmFkZXJGaXJlUmF0ZSA9IDAuOTI7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBhbGxGaWx0ZXJlZEJvZGllcyA9IFsuLi5pbnZhZGVyRmlsdGVyZWRCb2RpZXMsIC4uLnBsYXllckZpbHRlcmVkQm9kaWVzXTtcbiAgICAgICAgLy8gQWRkIGJvZGllcyBiYWNrIHdpdGggZXhwbG9zaW9uXG4gICAgICAgIGlmIChhbGxGaWx0ZXJlZEJvZGllcy5sZW5ndGggPiAwKSB7ICAgICBcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgYWxsRmlsdGVyZWRCb2RpZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJvZGllcy5wdXNoKGFsbEZpbHRlcmVkQm9kaWVzW2pdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJlbW92ZSBhbGwgYm9kaWVzIHRoYXQgYXJlIG5vdCB2aXNpYmxlIG9uIHRoZSBzY3JlZW4gXG4gICAgICAgIHRoaXMuYm9kaWVzID0gdGhpcy5ib2RpZXMuZmlsdGVyKGZ1bmN0aW9uKHRoZUJvZHkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGVCb2R5LnZpc2libGU7XG4gICAgICAgIH0pOyBcblxuICAgICAgICB0aGlzLmJvZGllcyA9IHRoaXMuYm9kaWVzLmZpbHRlcihmdW5jdGlvbih0aGVCb2R5KSB7XG4gICAgICAgICAgICAgcmV0dXJuIHRoZUJvZHkucmVtb3ZlID09PSBmYWxzZTtcbiAgICAgICAgfSk7IFxuXG4gICAgICAgIGlmICh0aGlzLnBsYXllckxpdmVzTGVmdCA8IDEpIHtcbiAgICAgICAgICAgIC8vZGVsYXkgZ2FtZSBvdmVyIHRvIGxldCBhbmltYXRpb24gZmluaXNoXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZ2FtZU92ZXIgPSB0cnVlO1xuICAgICAgICAgICAgfSwgNzUwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpbnZhZGVyc0xlZnRBbGl2ZS5sZW5ndGggPD0gMCAmJiB0aGlzLnBsYXllckxpdmVzTGVmdCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMucGF1c2VkID0gdHJ1ZTsgICAgIFxuICAgICAgICAgICAgdGhpcy5wbGF5ZXJMaXZlc0xlZnQgPCA4ID8gdGhpcy5wbGF5ZXJMaXZlc0xlZnQrKyA6IHRoaXMucGxheWVyTGl2ZXNMZWZ0O1xuICAgICAgICAgICAgdGhpcy5pbmNyZW1lbnRMZXZlbCgpO1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdhbWUubG9hZExldmVsKCk7XG4gICAgICAgICAgICB9LCAxMjUwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFVwZGF0ZSBQb3NpdGlvblxuICAgICAgICBmb3IgKGxldCBpZHggPSAwOyBpZHggPCB0aGlzLmJvZGllcy5sZW5ndGg7IGlkeCsrKSB7XG4gICAgICAgICAgICB0aGlzLmJvZGllc1tpZHhdLnVwZGF0ZSh0aW1lKTtcbiAgICAgICAgfVxuICAgIH0sICAvLyB1cGRhdGVcblxuICAgIGRyYXc6IGZ1bmN0aW9uKHNjcmVlbiwgZ2FtZVNpemUpIHtcbiAgICAgICAgc2NyZWVuLmNsZWFyUmVjdCgwLCAwLCBnYW1lU2l6ZS54LCBnYW1lU2l6ZS55KTtcbiAgICAgICAgc2NyZWVuLmRyYXdJbWFnZSh0aGlzLmJhY2tncm91bmRJbWcsIDAsIDAsIGdhbWVTaXplLngsIGdhbWVTaXplLnkpO1xuICAgICAgICBcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmJvZGllcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5ib2RpZXNbaV0uZHJhdyh0aGlzLnNjcmVlbiwgdGhpcy5ib2RpZXNbaV0pO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIGxvYWRMZXZlbDogZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiIFxcbiAqKiogTG9hZGluZyBsZXZlbCBOdW1iZXIgXCIgKyB0aGlzLmxldmVsICsgXCIgKioqXCIpO1xuICAgICAgICBjb25zdCAgbGV2ZWwgPSB0aGlzLmdldExldmVsKCk7XG4gICAgICAgIGNvbnN0ICBsZXZlbF9kYXRhID0gdGhpcy5sZXZlbERhdGFbbGV2ZWxdO1xuICAgICAgICBjb25zdCAgcm93ID0gbGV2ZWxfZGF0YS5yb3c7XG4gICAgICAgIGNvbnN0ICBjb2wgPSBsZXZlbF9kYXRhLmNvbDtcbiAgICAgICAgY29uc3QgIGJlaGF2aW9yID0gbGV2ZWxfZGF0YS5iZWhhdmlvcjtcbiAgICAgICAgY29uc3QgIGludmFkZXJJbWFnZSA9IGxldmVsX2RhdGEuaW52YWRlckltYWdlO1xuXG4gICAgICAgIHRoaXMucmFkYXIgPSBmYWxzZTtcblxuICAgICAgICB0aGlzLnBsYXllciAgPSBuZXcgUGxheWVyKHRoaXMsIFsgbmV3IEN5Y2xlSW1hZ2VzKDE2LCAzMikgXSwgXG4gICAgICAgICAgICBuZXcgU3ByaXRlUGFpbnRlcihbZ2FtZS5wbGF5ZXJJbWddKSwgdGhpcy5nYW1lU2l6ZSk7XG5cbiAgICAgICAgdGhpcy5zcGVlZFhfVmFsID0gbGV2ZWxfZGF0YS5zcGVlZFg7XG4gICAgICAgIHRoaXMuaW52YWRlckZpcmVSYXRlID0gbGV2ZWxfZGF0YS5pbnZhZGVyRmlyZVJhdGU7XG4gICAgICAgIHRoaXMuYmFja2dyb3VuZEltZyA9IGxldmVsX2RhdGEuYmFja2dyb3VuZEltZztcblxuICAgICAgICB0aGlzLmJvZGllcyA9IGNyZWF0ZUludmFkZXJzKHRoaXMsIHRoaXMuZ2FtZVNpemUsIGJlaGF2aW9yLCBpbnZhZGVySW1hZ2UsIFxuICAgICAgICByb3csIGNvbCkuY29uY2F0KHRoaXMucGxheWVyKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMucGF1c2VkID0gZmFsc2U7XG4gICAgfSxcblxuICAgIGdldExldmVsOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGV2ZWw7XG4gICAgfSxcblxuICAgIGluY3JlbWVudExldmVsOiBmdW5jdGlvbigpIHsgICAgICAgIFxuICAgICAgICB0aGlzLmxldmVsKys7XG4gICAgICAgIGlmICh0aGlzLmxldmVsID4gdGhpcy5sZXZlbERhdGEubGVuZ3RoIC0gMSl7XG4gICAgICAgICAgICB0aGlzLmxldmVsID0gMDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5sZXZlbDtcbiAgICB9LFxuXG4gICAgYWRkS2V5TGlzdGVuZXI6IGZ1bmN0aW9uKGtleUFuZExpc3RlbmVyKSB7XG4gICAgICAgIGdhbWUua2V5TGlzdGVuZXJzLnB1c2goa2V5QW5kTGlzdGVuZXIpO1xuICAgIH0sXG5cbiAgICBmaW5kS2V5TGlzdGVuZXI6IGZ1bmN0aW9uKGtleSkge1xuICAgICAgICBsZXQgbGlzdGVuZXI7XG5cbiAgICAgICAgZ2FtZS5rZXlMaXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbihrZXlBbmRMaXN0ZW5lcikge1xuICAgICAgICAgICAgY29uc3QgIGN1cnJlbnRLZXkgPSBrZXlBbmRMaXN0ZW5lci5rZXk7XG4gICAgICAgICAgICBpZiAoY3VycmVudEtleSA9PT0ga2V5KSB7XG4gICAgICAgICAgICAgICAgbGlzdGVuZXIgPSBrZXlBbmRMaXN0ZW5lci5saXN0ZW5lcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBsaXN0ZW5lcjtcbiAgICB9LFxuXG4gICAga2V5UHJlc3NlZDogZnVuY3Rpb24oZSkge1xuICAgICAgICBsZXQgbGlzdGVuZXI7XG4gICAgICAgIGtleSA9IHVuZGVmaW5lZDtcblxuICAgICAgICBzd2l0Y2ggKGUua2V5Q29kZSkge1xuICAgICAgICAgICAgY2FzZSA2Nzoga2V5ID0gJ2MnOyAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSA4MDoga2V5ID0gJ3AnOyAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSA4Mzoga2V5ID0gJ3MnOyAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgbGlzdGVuZXIgPSBnYW1lLmZpbmRLZXlMaXN0ZW5lcihrZXkpO1xuICAgICAgICBpZiAobGlzdGVuZXIpIHtcbiAgICAgICAgICAgIGxpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAga2V5VXA6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgbGV0IGxpc3RlbmVyO1xuICAgICAgICBrZXkgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgc3dpdGNoIChlLmtleUNvZGUpIHtcbiAgICAgICAgICAgIGNhc2UgMzI6IGtleSA9ICdzcGFjZWJhcic7ICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDM3OiBrZXkgPSAnbGVmdCBhcnJvdyc7ICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAzOToga2V5ID0gJ3JpZ2h0IGFycm93JzsgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMzg6IGtleSA9ICd1cCBhcnJvdyc7ICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDQwOiBrZXkgPSAnZG93biBhcnJvdyc7ICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgbGlzdGVuZXIgPSBnYW1lLmZpbmRLZXlMaXN0ZW5lcihrZXkpO1xuICAgICAgICBpZiAobGlzdGVuZXIpIHtcbiAgICAgICAgICAgIGxpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgYWRkQm9keTogZnVuY3Rpb24oYm9keSkge1xuICAgICAgICB0aGlzLmJvZGllcy5wdXNoKGJvZHkpO1xuICAgIH0sXG5cbiAgICBpbnZhZGVyc0JlbG93OiBmdW5jdGlvbihpbnZhZGVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJvZGllcy5maWx0ZXIoZnVuY3Rpb24oYikge1xuICAgICAgICAgICAgcmV0dXJuIGIgaW5zdGFuY2VvZiBJbnZhZGVyICYmXG4gICAgICAgICAgICAgICAgYi5jZW50ZXIueSA+IGludmFkZXIuY2VudGVyLnkgJiZcbiAgICAgICAgICAgICAgICBiLmNlbnRlci54IC0gaW52YWRlci5jZW50ZXIueCA8IGludmFkZXIuc2l6ZS54O1xuICAgICAgICB9KS5sZW5ndGggPiAwO1xuICAgIH0sXG5cbiAgICBnZXRIaWdoU2NvcmVzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgbGV0IGtleSA9IGdhbWUuZ2FtZU5hbWUgKyBnYW1lLkhJR0hfU0NPUkVTX1NVRkZJWCxcbiAgICAgICAgaGlnaFNjb3Jlc1N0cmluZyA9IGxvY2FsU3RvcmFnZVtrZXldO1xuICAgICAgICBpZiAoaGlnaFNjb3Jlc1N0cmluZyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Vba2V5XSA9IEpTT04uc3RyaW5naWZ5KFtdKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2Vba2V5XSk7XG4gICAgfSxcblxuICAgIHNldEhpZ2hTY29yZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIGxldCBrZXkgPSBnYW1lTmFtZSArIGdhbWUuSElHSF9TQ09SRVNfU1VGRklYLFxuICAgICAgICBoaWdoU2NvcmVzU3RyaW5nID0gbG9jYWxTdG9yYWdlO1xuXG4gICAgICAgIGhpZ2hTY29yZXMudW5zaGlmdChoaWdoU2NvcmUpO1xuICAgICAgICBsb2NhbFN0b3JhZ2Vba2V5XSA9IEpTT04uc3RyaW5naWZ5KGhpZ2hTY29yZXMpO1xuICAgIH0sXG5cbiAgICBjbGVhckhpZ2hTY29yZXM6IGZ1bmN0aW9uKCkge1xuICAgICAgICBsb2NhbFN0b3JhZ2VbZ2FtZS5nYW1lTmFtZSArIHRoaXMuSElHSF9TQ09SRVNfU1VGRklYXSA9IEpTT04uc3RyaW5naWZ5KFtdKTtcbiAgICB9LFxuXG4gICAgb3ZlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgIGxldCBoaWdoU2NvcmUgPSAwLFxuICAgICAgICBoaWdoU2NvcmVzID0gW3tzY29yZTogMTAwfSwge3Njb3JlOiA3NX0gLCB7c2NvcmU6IDUwfV07XG5cbiAgICAgICAgbGV0IGxhc3RPbkxpc3QgPSAkKCcjaGlnaFNjb3JlTGlzdCBsaScpLmxhc3QoKS50ZXh0KCk7IFxuXG4gICAgICAgIGlmIChoaWdoU2NvcmVzLmxlbmd0aCA9PT0gMCB8fCBnYW1lLnNjb3JlID4gaGlnaFNjb3Jlc1swXS5zY29yZSkge1xuICAgICAgICAgICAgLy8gdGhpcy5zaG93SGlnaFNjb3JlcygpO1xuICAgICAgICAgICAgZ2FtZS5oaWdoU2NvcmVUb2FzdC5pbnNlcnRBZnRlcignY2FudmFzJyk7XG4gICAgICAgICAgICBnYW1lLmhpZ2hTY29yZVRvYXN0LnNob3coKTsgXG4gICAgICAgICAgICAkKCcjaGlnaFNjb3JlUGFyYWdyYXBoJykuaHRtbChnYW1lLnNjb3JlKTtcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZ2FtZS5nYW1lT3ZlclRvYXN0Lmluc2VydEFmdGVyKCdjYW52YXMnKTtcbiAgICAgICAgICAgIGdhbWUuZ2FtZU92ZXJUb2FzdC5zaG93KCk7XG4gICAgICAgICAgICAkKCcjaGlnaFNjb3JlUGFyYWdyYXBoJykuaHRtbChnYW1lLnNjb3JlKTtcbiAgICAgICAgfVxuXG4gICAgICAgICQoJyNpbnB1dFNjb3JlJykudmFsKGdhbWUuc2NvcmUpO1xuXG4gICAgICAgIC8vIHRoaXMuZ2FtZU92ZXIgPSB0cnVlO1xuICAgICAgICAvLyB0aGlzLmxhc3RTY29yZSA9IHRoaXMuc2NvcmU7XG4gICAgICAgIC8vIHRoaXMuc2NvcmUgPSAwO1xuICAgIH0sXG4gICAgLy8gSGlnaCBTY29yZXMgLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uXG4gICAgc2hvd0hpZ2hTY29yZXM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAkKFwiI2hpZ2hTY29yZVBhcmFncmFwaFwiKS5zaG93KCk7XG4gICAgICAgICQoXCIjaGlnaFNjb3JlUGFyYWdyYXBoXCIpLnRleHQodGhpcy5zY29yZSk7XG4gICAgICAgICQoXCIjaGlnaFNjb3JlVG9hc3RcIikudGV4dCh0aGlzLnNjb3JlKTtcbiAgICAgICAgdGhpcy51cGRhdGVIaWdoU2NvcmVMaXN0KCk7XG4gICAgfSxcbiAgICB1cGRhdGVIaWdoU2NvcmVMaXN0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgbGV0IGVsLFxuICAgICAgICAgICAgaGlnaFNjb3JlcyA9IGdhbWUuZ2V0SGlnaFNjb3JlcygpLFxuICAgICAgICAgICAgbGVuZ3RoID0gaGlnaFNjb3Jlcy5sZW5ndGgsXG4gICAgICAgICAgICBoaWdoU2NvcmUsXG4gICAgICAgICAgICBsaXN0UGFyZW50ID0gaGlnaFNjb3JlTGlzdC5wYXJlbnROb2RlOyAgXG5cbiAgICB9LFxuICAgIGRyYXdTY29yZUJveDogZnVuY3Rpb24oKSB7XG4gICAgICAgIGxldCB0ZXh0ID0gJ1NDT1JFOiAnICsgdGhpcy5zY29yZTtcbiAgICAgICAgdGhpcy5zY3JlZW4uZmlsbFRleHQodGV4dCwgdGhpcy5nYW1lU2l6ZS54ICogMC4wNzUsIHRoaXMuZ2FtZVNpemUueSAqIDAuMDUwKTtcbiAgICAgICAgdGhpcy5zY3JlZW4uZmlsbFN0eWxlID0gJ3doaXRlJztcbiAgICAgICAgbGV0IGZvbnRIZWlnaHQgPSB0aGlzLmdhbWVTaXplLnkgKiAwLjAzNzU7XG4gICAgICAgIHRoaXMuc2NyZWVuLmZvbnQgPSBmb250SGVpZ2h0ICsgXCJweCBIZWx2ZXRpY2FcIjtcbiAgICAgICAgdGhpcy5zY3JlZW4udGV4dEFsaWduID0gJ2xlZnQnO1xuICAgICAgICB0aGlzLnNjcmVlbi50ZXh0QmFzZWxpbmUgPSAndG9wJztcbiAgICB9LFxuICAgIGRyYXdMaXZlc0xlZnRCb3g6IGZ1bmN0aW9uKCkge1xuICAgICAgICBsZXQgdGV4dCA9ICdMaXZlczogJyArIHRoaXMucGxheWVyTGl2ZXNMZWZ0O1xuICAgICAgICB0aGlzLnNjcmVlbi5maWxsVGV4dCh0ZXh0LCB0aGlzLmdhbWVTaXplLnggKiAwLjg1MCwgdGhpcy5nYW1lU2l6ZS55ICogMC4wNTApO1xuICAgICAgICB0aGlzLnNjcmVlbi5maWxsU3R5bGUgPSAnd2hpdGUnO1xuICAgICAgICBsZXQgZm9udEhlaWdodCA9IHRoaXMuZ2FtZVNpemUueSAqIDAuMDM3NTtcbiAgICAgICAgdGhpcy5zY3JlZW4uZm9udCA9IGZvbnRIZWlnaHQgKyBcInB4IEhlbHZldGljYVwiO1xuICAgICAgICB0aGlzLnNjcmVlbi50ZXh0QWxpZ24gPSAnbGVmdCc7XG4gICAgICAgIHRoaXMuc2NyZWVuLnRleHRCYXNlbGluZSA9ICd0b3AnO1xuICAgIH1cblxufTsgLy8gZW5kIEdhbWUucHJvdG90eXBlXG5cblxuY29uc3QgaW1hZ2VMb2FkZWRDYWxsYmFjayA9ICBmdW5jdGlvbihlKSB7XG4gICAgICAgIHRoaXMuaW1hZ2VzTG9hZGVkKys7XG4gICAgfTtcblxuY29uc3QgaW1hZ2VMb2FkRXJyb3JDYWxsYmFjayA9IGZ1bmN0aW9uKGUpe1xuICAgICAgICB0aGlzLmltYWdlc0ZhaWxlZFRvTG9hZCsrO1xuICAgIH07XG5cbmNvbnN0IGxvYWRJbWFnZSA9IGZ1bmN0aW9uKGltYWdlVXJsKSB7XG4gICAgICAgIGxldCBpbWFnZSA9IG5ldyBJbWFnZSgpO1xuICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcblxuICAgICAgICBpbWFnZS5zcmMgPSBpbWFnZVVybDtcblxuICAgICAgICBpbWFnZS5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgc2VsZi5pbWFnZUxvYWRlZENhbGxiYWNrKGUpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgc2VsZi5pbWFnZUxvYWRFcnJvckNhbGxiYWNrKGUpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmltYWdlc1tpbWFnZVVybF0gPSBpbWFnZTsgICAgICBcbiAgICB9O1xuXG5jb25zdCBsb2FkSW1hZ2VzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLmltYWdlc0luZGV4IDwgdGhpcy5pbWFnZVVybHMubGVuZ3RoKXtcbiAgICAgICAgICAgIHRoaXMubG9hZEltYWdlKHRoaXMuaW1hZ2VVcmxzW3RoaXMuaW1hZ2VzSW5kZXhdKTtcbiAgICAgICAgICAgIHRoaXMuaW1hZ2VzSW5kZXgrKztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAoKHRoaXMuaW1hZ2VzTG9hZGVkICsgdGhpcy5pbWFnZXNGYWlsZWRUb0xvYWQpIC8gXG4gICAgICAgICAgICB0aGlzLmltYWdlVXJscy5sZW5ndGgpICogMTAwO1xuICAgIH07XG5cbiAgICAvLyBDYWxsIHRvIGFkZCBpbWFnZSB0byBxdWV1ZVxuY29uc3QgcXVldWVJbWFnZSA9IGZ1bmN0aW9uKGltYWdlVXJsKSB7XG4gICAgICAgIHRoaXMuaW1hZ2VVcmxzLnB1c2goaW1hZ2VVcmwpO1xuICAgIH07XG5cbmNvbnN0IGdldEltYWdlID0gZnVuY3Rpb24oaW1hZ2VVcmwpIHtcbiAgICAgICAgcmV0dXJuICB0aGlzLmltYWdlc1tpbWFnZVVybF07XG4gICAgfTtcbiAgICBcbmNvbnN0IFBsYXllciA9IGZ1bmN0aW9uKGdhbWUsIGJlaGF2aW9yLCBwYWludGVyLCBnYW1lU2l6ZSkge1xuICAgIHRoaXMubmFtZSA9IFwicGxheWVyXCI7XG4gICAgdGhpcy5nYW1lU2l6ZSA9IGdhbWVTaXplO1xuICAgIHRoaXMuYmVoYXZpb3IgPSBiZWhhdmlvcjtcbiAgICB0aGlzLnBhaW50ZXIgPSBwYWludGVyO1xuICAgIHRoaXMuZ2FtZSA9IGdhbWU7XG4gICAgdGhpcy5zdGVwX1ggPSA0O1xuICAgIHRoaXMuc3RlcF9ZID0gNDtcbiAgICB0aGlzLmR4ID0gdGhpcy5keSA9IDEuMDE1O1xuICAgIHRoaXMuYW5pbWF0aW5nID0gZmFsc2U7XG4gICAgdGhpcy5yZW1vdmUgPSBmYWxzZTsgXG4gICAgdGhpcy52aXNpYmxlID0gdHJ1ZTtcbiAgICB0aGlzLnJhZGFyID0gZmFsc2U7XG4gICAgdGhpcy5zaXplID0gZ2V0U3ByaXRlU2l6ZSgncGxheWVyJywgdGhpcy5nYW1lU2l6ZSk7XG4gICAgdGhpcy5jZW50ZXIgPSB7IHg6IGdhbWVTaXplLnggLyAyLCB5OiBnYW1lU2l6ZS55IC0gMS4wICogdGhpcy5zaXplLnkgfTtcblxufTtcblxuUGxheWVyLnByb3RvdHlwZSA9IHtcbiAgICB1cGRhdGU6IGZ1bmN0aW9uKHRpbWUpIHtcblxuICAgICAgICAvL0xvb3AgdGhyb3VnaCBhbGwgYmVoYXZpb3JzXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5iZWhhdmlvci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5iZWhhdmlvcltpXS5leGVjdXRlKHRoaXMsIHRoaXMuZ2FtZVNpemUsIHRpbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuZ2FtZS5rZXlib2FyZGVyLmlzRG93bih0aGlzLmdhbWUua2V5Ym9hcmRlci5LRVlTLkxFRlQpKSB7XG4gICAgICAgICAgICB0aGlzLnN0ZXBfWCAqPSB0aGlzLmR4O1xuICAgICAgICAgICAgdGhpcy5zdGVwX1ggPSB0aGlzLnN0ZXBfWCA+IDggPyA4IDogdGhpcy5zdGVwX1g7XG4gICAgICAgICAgICB0aGlzLmNlbnRlci54ID0gdGhpcy5jZW50ZXIueCA8ICgwIC0gdGhpcy5zaXplLnggLyAyKSA/IHRoaXMuZ2FtZS5nYW1lU2l6ZS54IDogdGhpcy5jZW50ZXIueDtcbiAgICAgICAgICAgIHRoaXMuY2VudGVyLnggLT0gdGhpcy5zdGVwX1g7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZ2FtZS5rZXlib2FyZGVyLmlzRG93bih0aGlzLmdhbWUua2V5Ym9hcmRlci5LRVlTLlJJR0hUKSkge1xuICAgICAgICAgICAgdGhpcy5zdGVwX1ggKj0gdGhpcy5keDtcbiAgICAgICAgICAgIHRoaXMuc3RlcF9YID0gdGhpcy5zdGVwX1ggPiA4ID8gOCA6IHRoaXMuc3RlcF9YO1xuICAgICAgICAgICAgdGhpcy5jZW50ZXIueCA9IHRoaXMuY2VudGVyLnggPiAodGhpcy5nYW1lLmdhbWVTaXplLnggKyB0aGlzLnNpemUueCAvIDIpID8gMCA6IHRoaXMuY2VudGVyLng7XG4gICAgICAgICAgICB0aGlzLmNlbnRlci54ICs9IHRoaXMuc3RlcF9YO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmdhbWUua2V5Ym9hcmRlci5pc0Rvd24odGhpcy5nYW1lLmtleWJvYXJkZXIuS0VZUy5VUCkpIHtcbiAgICAgICAgICAgIHRoaXMuc3RlcF9ZICo9IHRoaXMuZHk7XG4gICAgICAgICAgICB0aGlzLnN0ZXBfWSA9IHRoaXMuc3RlcF9ZID4gOCA/IDggOiB0aGlzLnN0ZXBfWTtcbiAgICAgICAgICAgIHRoaXMuY2VudGVyLnkgPSB0aGlzLmNlbnRlci55ID4gKHRoaXMuZ2FtZS5nYW1lU2l6ZS55ICsgdGhpcy5zaXplLnkgLyAyKSA/IDAgOiB0aGlzLmNlbnRlci55O1xuICAgICAgICAgICAgdGhpcy5jZW50ZXIueSArPSB0aGlzLnN0ZXBfWTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5nYW1lLmtleWJvYXJkZXIuaXNEb3duKHRoaXMuZ2FtZS5rZXlib2FyZGVyLktFWVMuRE9XTikpIHtcbiAgICAgICAgICAgIHRoaXMuc3RlcF9ZICo9IHRoaXMuZHk7IFxuICAgICAgICAgICAgdGhpcy5zdGVwX1kgPSB0aGlzLnN0ZXBfWSA+IDggPyA4IDogdGhpcy5zdGVwX1k7XG4gICAgICAgICAgICB0aGlzLmNlbnRlci55ID0gdGhpcy5jZW50ZXIueSA8ICgwIC0gdGhpcy5zaXplLnkgLyAyKSA/IHRoaXMuZ2FtZS5nYW1lU2l6ZS55IDogdGhpcy5jZW50ZXIueTtcbiAgICAgICAgICAgIHRoaXMuY2VudGVyLnkgLT0gdGhpcy5zdGVwX1k7XG4gICAgICAgIH0gXG4gICAgICAgIGlmICh0aGlzLmdhbWUua2V5Ym9hcmRlci5pc0Rvd24odGhpcy5nYW1lLmtleWJvYXJkZXIuS0VZUy5TUEFDRSkgJiYgXG4gICAgICAgICAgICAhdGhpcy5nYW1lLmd1bl9Mb2NrZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZ2FtZS5idWxsZXRDbnRyLS07XG4gICAgICAgICAgICB0aGlzLmdhbWUuZ3VuX0xvY2tlZCA9IHRoaXMuZ2FtZS5idWxsZXRDbnRyIDw9IDAgPyB0cnVlIDogZmFsc2U7XG5cbiAgICAgICAgICAgIGxldCBtaXNzbGUgPSBuZXcgTWlzc2xlKHsgeDogdGhpcy5jZW50ZXIueCwgeTogdGhpcy5jZW50ZXIueSAtIFxuICAgICAgICAgICAgICAgIHRoaXMuc2l6ZS55IC8gMn0sIHsgeDogMCwgeTogLXRoaXMuZ2FtZVNpemUueSAqIDAuMDE1MCB9LCBcbiAgICAgICAgICAgICAgICB0aGlzLmdhbWVTaXplKTtcbiAgICAgICAgICAgIHRoaXMuZ2FtZS5zY29yZSAtPSA1O1xuICAgICAgICAgICAgdGhpcy5nYW1lLmFkZEJvZHkobWlzc2xlKTtcblxuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMuZ2FtZS5zaG9vdFNvdW5kLmxvYWQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmdhbWUuc2hvb3RTb3VuZC5wbGF5KCk7XG4gICAgICAgICAgICB9IFxuICAgICAgICAgICAgY2F0Y2goZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsb2FkaW5nIHNvdW5kOiAnLCBlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGRyYXc6IGZ1bmN0aW9uKHNjcmVlbiwgYm9keSkge1xuICAgICAgICB0aGlzLnBhaW50ZXIuZHJhdyhzY3JlZW4sIGJvZHkpO1xuICAgICAgICB9ICAgXG59O1xuXG5jb25zdCBJbnZhZGVyID0gZnVuY3Rpb24oZ2FtZSwgY2VudGVyLCBiZWhhdmlvciwgcGFpbnRlciwgZ2FtZVNpemUpIHtcbiAgICB0aGlzLm5hbWUgPSBcImludmFkZXJcIjtcbiAgICB0aGlzLmdhbWUgPSBnYW1lO1xuICAgIHRoaXMuZ2FtZVNpemUgPSBnYW1lU2l6ZTtcbiAgICB0aGlzLmJlaGF2aW9yID0gYmVoYXZpb3I7XG4gICAgdGhpcy5wYWludGVyID0gcGFpbnRlcjtcblxuICAgIHRoaXMudmlzaWJsZSA9IHRydWU7XG4gICAgdGhpcy5hbmltYXRpbmcgPSBmYWxzZTtcbiAgICB0aGlzLnJlbW92ZSA9IGZhbHNlO1xuICAgIC8vIHRoaXMuZ2FtZS5yYWRhciA9IGZhbHNlO1xuICAgIFxuICAgIHRoaXMuc2l6ZSA9IGdldFNwcml0ZVNpemUoJ2ludmFkZXInLCB0aGlzLmdhbWVTaXplKTtcblxuICAgIHRoaXMuY2VudGVyID0gY2VudGVyO1xuICAgIHRoaXMucmFkaWFucyA9IDAuMDI1O1xuICAgIHRoaXMudG90YWxSYWRpYW5zID0gMDtcbiAgICB0aGlzLnNjYWxlSGVpZ2h0ID0gMS41O1xuICAgIHRoaXMucGF0cm9sWCA9IDA7XG5cbiAgICB0aGlzLnNwZWVkWCA9IGdhbWVTaXplLnggKiB0aGlzLmdhbWUuc3BlZWRYX1ZhbDsgXG59O1xuXG5JbnZhZGVyLnByb3RvdHlwZSA9IHtcbiAgICB1cGRhdGU6IGZ1bmN0aW9uKHRpbWUpIHtcblxuICAgICAgICBsZXQgdGFyZ2V0TG9jYXRpb24gPSB7fTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYmVoYXZpb3IubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuYmVoYXZpb3JbaV0uZXhlY3V0ZSh0aGlzLCB0aGlzLmdhbWVTaXplLCB0aW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudmlzaWJsZSA9IHRoaXMuY2VudGVyLnkgPiB0aGlzLmdhbWVTaXplLnkgKiAxLjEwID8gZmFsc2UgOiB0cnVlO1xuXG4gICAgICAgIGlmIChNYXRoLnJhbmRvbSgpID4gdGhpcy5nYW1lLmludmFkZXJGaXJlUmF0ZSAmJiBcbiAgICAgICAgICAgICF0aGlzLmdhbWUuaW52YWRlcnNCZWxvdyh0aGlzKSkge1xuXG5cbiAgICAgICAgICAgIGlmICh0aGlzLmdhbWUucmFkYXIgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXRMb2NhdGlvbiA9IHJhZGFyR3VpZGFuY2UodGhpcy5nYW1lLnBsYXllciwgXG4gICAgICAgICAgICAgICAgICAgIHRoaXMsIHRoaXMuZ2FtZVNpemUueSAqIDAuMDA3NSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRhcmdldExvY2F0aW9uID0geyB4OiAwLCB5OiB0aGlzLmdhbWVTaXplLnkgKiAwLjAwNzUgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IGJ1bGxldCA9IG5ldyBCdWxsZXQoeyB4OiB0aGlzLmNlbnRlci54LCB5OiB0aGlzLmNlbnRlci55ICsgXG4gICAgICAgICAgICAgICAgdGhpcy5zaXplLnggLyAyfSwgdGFyZ2V0TG9jYXRpb24sIFxuICAgICAgICAgICAgICAgIHRoaXMuZ2FtZVNpemUpO1xuICAgICAgICAgICAgdGhpcy5nYW1lLmFkZEJvZHkoYnVsbGV0KTtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLmdhbWUuYWxpZW5TaG9vdFNvdW5kLmxvYWQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmdhbWUuYWxpZW5TaG9vdFNvdW5kLnBsYXkoKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYWRkaW5nIGFsaWVuU2hvb3RTb3VuZDogJywgZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcbiAgICBkcmF3OiBmdW5jdGlvbihzY3JlZW4sIGJvZHkpIHtcbiAgICAgICAgdGhpcy5wYWludGVyLmRyYXcoc2NyZWVuLCBib2R5KTtcbiAgICB9ICAgXG59O1xuXG5jb25zdCBjcmVhdGVJbnZhZGVycyA9IGZ1bmN0aW9uKGdhbWUsIGdhbWVTaXplLCBiZWhhdmlvciwgaW52YWRlckltYWdlLCByb3csIGNvbCkge1xuICAgIHRoaXMuZ2FtZSA9IGdhbWU7XG4gICAgbGV0IGludmFkZXJzID0gW10sXG4gICAgICAgIGZsZWV0V2lkdGggPSAwLFxuICAgICAgICBzaXplID0ge307XG5cbiAgICBzaXplID0gZ2V0U3ByaXRlU2l6ZSgnaW52YWRlcicsIGdhbWVTaXplKTtcbiAgICBmbGVldFdpZHRoID0gMiAqIGNvbCAqIHNpemUueDtcblxuICAgIHRoaXMuZ2FtZS5mbGVldFBhdHJvbF9YID0gKChnYW1lU2l6ZS54IC0gZmxlZXRXaWR0aCkgLyAyKTtcblxuICAgIC8vIGNvbnNvbGUubG9nKFwidGhpcy5nYW1lLmZsZWV0UGF0cm9sX1g6IFwiLHRoaXMuZ2FtZS5mbGVldFBhdHJvbF9YKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgKHJvdyAqIGNvbCk7IGkrKykge1xuXG4gICAgICAgIGxldCB4ID0gKHRoaXMuZ2FtZS5mbGVldFBhdHJvbF9YKSArIChpICUgY29sKSAqIChnYW1lU2l6ZS54ICogMC4wNzUpO1xuICAgICAgICBsZXQgeSA9IChnYW1lU2l6ZS55ICogMC4wNzUpICsgKGkgJSByb3cpICogKGdhbWVTaXplLnkgKiAwLjA3NSk7XG5cbiAgICAgICAgaW52YWRlcnMucHVzaChuZXcgSW52YWRlcihnYW1lLCB7IHg6IHgsIHk6IHkgfSwgW2JlaGF2aW9yLCBcbiAgICAgICAgICAgIG5ldyBDeWNsZUltYWdlcygxNiwgMzIpXSwgbmV3IFNwcml0ZVBhaW50ZXIoW2ludmFkZXJJbWFnZV0pLCBnYW1lU2l6ZSkpO1xuICAgIH1cblxuICAgIHJldHVybiBpbnZhZGVycztcbn07XG5cbmNvbnN0IGdldFNwcml0ZVNpemUgPSBmdW5jdGlvbihzcHJpdGVOYW1lLCBnYW1lU2l6ZSl7XG4gICAgbGV0IHNpemUgPSB7fTsgIC8vIG5vdCBjb25zdFxuXG4gICAgLy8gVE9ETzogQ2xlYW4gdGhpcyB1cCBhbmQgZmlndXJlIG91dCB3aGF0IGtpbmQgb2Egc2NyZWVuIHRoZSB1c2VyIGhhcyBvcGVuXG4gICAgLy8gNDozIDE2OjkgOiAyMTo5IGV0Yy4gYW5kIHNjYWxlIHRoZSBpbWFnZXMgZnJvbSB0aGVyZS5cbiAgICBpZiAoc3ByaXRlTmFtZSA9PT0gJ3BsYXllcicpIHtcbiAgICAgICAgaWYgKGdhbWVTaXplLnggPiAxNDAwKSB7XG4gICAgICAgICAgICBzaXplID0geyB4OiBnYW1lU2l6ZS54ICogMC4wNTAsIHk6IGdhbWVTaXplLnggKiAwLjA3NTAgfTsgXG4gICAgICAgIH0gZWxzZSBpZiAoZ2FtZVNpemUueCA+IDEwMjQpIHtcbiAgICAgICAgICAgIHNpemUgPSB7IHg6IGdhbWVTaXplLnggKiAwLjA2MCwgeTogZ2FtZVNpemUueCAqIDAuMDkwIH07IFxuICAgICAgICB9IGVsc2UgaWYgKGdhbWVTaXplLnggPiA3Njgpe1xuICAgICAgICAgICAgc2l6ZSA9IHsgeDogZ2FtZVNpemUueCAqIDAuMDc1LCB5OiBnYW1lU2l6ZS54ICogMC4xMTI1IH07IFxuICAgICAgICB9IGVsc2UgaWYgKGdhbWVTaXplLnggPiA0MDEpIHtcbiAgICAgICAgICAgIHNpemUgPSB7IHg6IGdhbWVTaXplLnggKiAwLjEwMCwgeTogZ2FtZVNpemUueCAqIDAuMTUwIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzaXplID0geyB4OiAyMCwgeTogMjAgfTsgLy8geDogMTUsIHk6IDE1XG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHNwcml0ZU5hbWUgPT09ICdpbnZhZGVyJykge1xuICAgICAgICBpZiAoZ2FtZVNpemUueCA+IDE0MDApIHtcbiAgICAgICAgICAgIHNpemUgPSB7IHg6IGdhbWVTaXplLnggKiAwLjAzMjUsIHk6IGdhbWVTaXplLnggKiAwLjAzMjUgfTsgXG4gICAgICAgIH0gZWxzZSBpZiAoZ2FtZVNpemUueCA+IDEwMjQpIHtcbiAgICAgICAgICAgIHNpemUgPSB7IHg6IGdhbWVTaXplLnggKiAwLjAzNzUsIHk6IGdhbWVTaXplLnggKiAwLjAzNzUgfTsgXG4gICAgICAgIH0gZWxzZSBpZiAoZ2FtZVNpemUueCA+IDc2OCl7XG4gICAgICAgICAgICBzaXplID0geyB4OiBnYW1lU2l6ZS54ICogMC4wNDI1LCB5OiBnYW1lU2l6ZS54ICogMC4wNDI1IH07IFxuICAgICAgICB9IGVsc2UgaWYgKGdhbWVTaXplLnggPiA0MDEpIHtcbiAgICAgICAgICAgIHNpemUgPSB7IHg6IGdhbWVTaXplLnggKiAwLjA1MjUsIHk6IGdhbWVTaXplLnggKiAwLjA1MjUgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNpemUgPSB7IHg6IDIwLCB5OiAyMCB9OyAvLyB4OiAxNSwgeTogMTVcbiAgICAgICAgfVxuICAgIH0gZWxzZSBpZiAoc3ByaXRlTmFtZSA9PT0gJ21pc3NsZScpIHtcblxuICAgICAgICBpZiAoZ2FtZVNpemUueCA+IDEwMjQpIHtcbiAgICAgICAgICAgIHNpemUgPSB7IHg6IDE1LCB5OiAyNSB9OyBcbiAgICAgICAgfSBlbHNlIGlmIChnYW1lU2l6ZS54ID4gNzY4KXtcbiAgICAgICAgICAgIHNpemUgPSB7IHg6IDEwLCB5OiAxNiB9OyBcbiAgICAgICAgfSBlbHNlIGlmIChnYW1lU2l6ZS54ID4gNDAxKSB7XG4gICAgICAgICAgICBzaXplID0geyB4OiA2LCB5OiAxMCB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc2l6ZSA9IHsgeDogNCwgeTogNyB9OyAvLyB4OiAxNSwgeTogMTVcbiAgICAgICAgfVxuICAgIH1lbHNlIGlmIChzcHJpdGVOYW1lID09PSAnYnVsbGV0Jykge1xuXG4gICAgICAgIGlmIChnYW1lU2l6ZS54ID4gMTAyNCkge1xuICAgICAgICAgICAgc2l6ZSA9IHsgeDogMTUsIHk6IDE1IH07IFxuICAgICAgICB9IGVsc2UgaWYgKGdhbWVTaXplLnggPiA3Njgpe1xuICAgICAgICAgICAgc2l6ZSA9IHsgeDogMTIsIHk6IDEyIH07IFxuICAgICAgICB9IGVsc2UgaWYgKGdhbWVTaXplLnggPiA0MDEpIHtcbiAgICAgICAgICAgIHNpemUgPSB7IHg6IDgsIHk6IDggfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNpemUgPSB7IHg6IDQsIHk6IDQgfTsgLy8geDogMTUsIHk6IDE1XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHNpemU7XG59O1xuXG4vLyBNb3ZlbWVudHMgdGhlIGFsaWVucyB0YWtlXG5jb25zdCByaWdodFRvTGVmdCA9IHtcblxuICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKGJvZHksIGdhbWVTaXplKSB7XG5cbiAgICAgICAgaWYgKGJvZHkucGF0cm9sWCA8IC1ib2R5LmdhbWUuZmxlZXRQYXRyb2xfWCB8fCBib2R5LnBhdHJvbFggPiAoYm9keS5nYW1lLmZsZWV0UGF0cm9sX1gpKSB7XG4gICAgICAgICAgICBib2R5LnNwZWVkWCA9IC1ib2R5LnNwZWVkWDtcbiAgICAgICAgICAgIC8vIERyb3BzIGRvd24gYWZ0ZXIgZXZlcnkgcGF0cm9sXG4gICAgICAgICAgICBib2R5LmNlbnRlci55ICs9IGJvZHkuc2l6ZS55ICogMi41O1xuICAgICAgICAgICAgLy8gYm9keS5zcGVlZFggKz0gYm9keS5zcGVlZFg7XG4gICAgICAgIH1cbiAgICAgICAgYm9keS5jZW50ZXIueCArPSBib2R5LnNwZWVkWDtcbiAgICAgICAgYm9keS5wYXRyb2xYICs9IGJvZHkuc3BlZWRYO1xuXG4gICAgfVxufTtcblxuLy8gQWxpZW5zIHdpbGwgZm9sbG93IGEgIHNpbmV3YXZlIG9yIHNuYWtlIHBhdHRlcm5wICBcbmNvbnN0IHNpbmVXYXZlID0ge1xuXG4gICAgZXhlY3V0ZTogZnVuY3Rpb24oYm9keSwgZ2FtZVNpemUpIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coXCJJbiBzaW5lV2F2ZSBleGVjdXRlJ3MgdGhpczogJWpcIiwgYm9keSlcblxuICAgICAgICBpZiAoYm9keS5wYXRyb2xYIDwgLWJvZHkuZ2FtZS5mbGVldFBhdHJvbF9YIHx8IGJvZHkucGF0cm9sWCA+IChib2R5LmdhbWUuZmxlZXRQYXRyb2xfWCkpIHtcbiAgICAgICAgICAgIGJvZHkuc3BlZWRYID0gLWJvZHkuc3BlZWRYO1xuICAgICAgICAgICAgYm9keS5yYWRpYW5zID0gLWJvZHkucmFkaWFucztcblxuICAgICAgICAgICAgLy8gRHJvcHMgZG93biBhZnRlciBldmVyeSBwYXRyb2xcbiAgICAgICAgICAgIGJvZHkuY2VudGVyLnkgKz0gYm9keS5zaXplLnk7XG4gICAgICAgICAgICAvLyBib2R5LnNwZWVkWCArPSBib2R5LnNwZWVkWDtcbiAgICAgICAgfVxuXG4gICAgICAgIGJvZHkudG90YWxSYWRpYW5zICs9IGJvZHkucmFkaWFucztcbiAgICAgICAgYm9keS5jZW50ZXIueCArPSBib2R5LnNwZWVkWDtcbiAgICAgICAgYm9keS5wYXRyb2xYICs9IGJvZHkuc3BlZWRYO1xuICAgICAgICBib2R5LmNlbnRlci55ICs9IGJvZHkuc2NhbGVIZWlnaHQgKiBNYXRoLnNpbihib2R5LnRvdGFsUmFkaWFucyk7XG5cbiAgICB9XG59O1xuXG5jb25zdCBoYWxmQ2lyY2xlID0ge1xuXG4gICAgZXhlY3V0ZTogZnVuY3Rpb24oYm9keSwgZ2FtZVNpemUpIHtcblxuICAgICAgICBpZiAoYm9keS5wYXRyb2xYIDwgLWJvZHkuZ2FtZS5mbGVldFBhdHJvbF9YIHx8IGJvZHkucGF0cm9sWCA+IChib2R5LmdhbWUuZmxlZXRQYXRyb2xfWCkpIHtcbiAgICAgICAgICAgIGJvZHkuc3BlZWRYID0gLWJvZHkuc3BlZWRYO1xuICAgICAgICAgICAgLy8gYm9keS5yYWRpYW5zID0gLWJvZHkucmFkaWFucztcblxuICAgICAgICAgICAgLy8gRHJvcHMgZG93biBhZnRlciBldmVyeSBwYXRyb2xcbiAgICAgICAgICAgIGJvZHkuY2VudGVyLnkgKz0gYm9keS5zaXplLnk7XG4gICAgICAgIH1cblxuICAgICAgICBib2R5LnRvdGFsUmFkaWFucyArPSBib2R5LnJhZGlhbnMgKiAwLjU7XG4gICAgICAgIGJvZHkuY2VudGVyLnggKz0gYm9keS5zcGVlZFg7XG4gICAgICAgIGJvZHkucGF0cm9sWCArPSBib2R5LnNwZWVkWDtcbiAgICAgICAgYm9keS5jZW50ZXIueSArPSBib2R5LnNjYWxlSGVpZ2h0ICogTWF0aC5zaW4oYm9keS50b3RhbFJhZGlhbnMpO1xuXG4gICAgfVxufTtcblxuY29uc3QgZHJvcERpYWdvbmFsID0ge1xuXG4gICAgZXhlY3V0ZTogZnVuY3Rpb24oYm9keSwgZ2FtZVNpemUpIHtcblxuICAgICAgICBpZiAoYm9keS5wYXRyb2xYIDwgLWJvZHkuZ2FtZS5mbGVldFBhdHJvbF9YIHx8IGJvZHkucGF0cm9sWCA+IChib2R5LmdhbWUuZmxlZXRQYXRyb2xfWCkpIHtcbiAgICAgICAgICAgIGJvZHkuc3BlZWRYID0gLWJvZHkuc3BlZWRYO1xuICAgICAgICAgICAgLy8gYm9keS5yYWRpYW5zID0gLWJvZHkucmFkaWFucztcblxuICAgICAgICAgICAgLy8gRHJvcHMgZG93biBhZnRlciBldmVyeSBwYXRyb2xcbiAgICAgICAgICAgIGJvZHkuY2VudGVyLnkgKz0gYm9keS5zaXplLnk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGJvZHkuY2VudGVyLnggKz0gKGJvZHkuc3BlZWRYICk7XG4gICAgICAgIGJvZHkucGF0cm9sWCArPSAoYm9keS5zcGVlZFgpO1xuICAgICAgICBib2R5LmNlbnRlci55ICs9IChib2R5LnNwZWVkWCAqIDAuNSk7XG4gICAgICAgIFxuICAgIH1cbn07XG5cbmNvbnN0IEJ1bGxldCA9IGZ1bmN0aW9uKGNlbnRlciwgdmVsb2NpdHksIGdhbWVTaXplKSB7XG4gICAgdGhpcy5nYW1lU2l6ZSA9IGdhbWVTaXplO1xuICAgIHRoaXMuY2VudGVyID0gY2VudGVyO1xuICAgIHRoaXMudmVsb2NpdHkgPSB2ZWxvY2l0eTtcbiAgICB0aGlzLnZpc2libGUgPSB0cnVlO1xuICAgIHRoaXMucmVtb3ZlID0gZmFsc2U7XG4gICAgdGhpcy5zaXplID0gZ2V0U3ByaXRlU2l6ZSgnYnVsbGV0JywgZ2FtZVNpemUpO1xufTtcblxuQnVsbGV0LnByb3RvdHlwZSA9IHtcbiAgICB1cGRhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLmNlbnRlci54ICs9IHRoaXMudmVsb2NpdHkueDtcbiAgICAgICAgdGhpcy5jZW50ZXIueSArPSB0aGlzLnZlbG9jaXR5Lnk7IFxuXG4gICAgICAgIC8vIElmIHRoZSBidWxsZXQgbW92ZXMgb2ZmIHRoZSBib2FyZFxuICAgICAgICAvLyBzZXQgdG8gdmlzaWJsZSA9IGZhbHNlXG4gICAgICAgIGlmICh0aGlzLmNlbnRlci55IDwgIDAgLSAodGhpcy5nYW1lU2l6ZS55ICogMC4xMCkgICB8fCBcbiAgICAgICAgICAgIHRoaXMuY2VudGVyLnkgPiB0aGlzLmdhbWVTaXplLnkgKiAxLjEwICAgICAgICAgIHx8XG4gICAgICAgICAgICB0aGlzLmNlbnRlci54IDwgMCAtICh0aGlzLmdhbWVTaXplLnggKiAwLjEwKSAgICB8fFxuICAgICAgICAgICAgdGhpcy5jZW50ZXIueCA+IHRoaXMuZ2FtZVNpemUueCAqIDEuMTApIHtcblxuICAgICAgICAgICAgdGhpcy52aXNpYmxlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9LCBcbiAgICBkcmF3OiBmdW5jdGlvbihzY3JlZW4sIGJvZHkpIHtcbiAgICAgICAgc2NyZWVuLmRyYXdJbWFnZShnYW1lLmVuZW15X2J1bGxldEltZywgYm9keS5jZW50ZXIueCAtIGJvZHkuc2l6ZS54IC8gMiwgXG4gICAgICAgICAgICBib2R5LmNlbnRlci55IC0gYm9keS5zaXplLnkgLyAyICwgYm9keS5zaXplLngsIGJvZHkuc2l6ZS55KTtcbiAgICB9XG59O1xuXG5jb25zdCBNaXNzbGUgPSBmdW5jdGlvbihjZW50ZXIsIHZlbG9jaXR5LCBnYW1lU2l6ZSkge1xuICAgIHRoaXMuZ2FtZVNpemUgPSBnYW1lU2l6ZTtcbiAgICAvLyB0aGlzLnNpemUgPSB7IHg6IDE1LCB5OiAyNSB9O1xuICAgIHRoaXMuc2l6ZSA9IGdldFNwcml0ZVNpemUoJ21pc3NsZScsIGdhbWVTaXplKTtcbiAgICB0aGlzLmNlbnRlciA9IGNlbnRlcjtcbiAgICB0aGlzLnZlbG9jaXR5ID0gdmVsb2NpdHk7XG4gICAgdGhpcy52aXNpYmxlID0gdHJ1ZTtcbiAgICB0aGlzLnJlbW92ZSA9IGZhbHNlO1xufTtcblxuTWlzc2xlLnByb3RvdHlwZSA9IHtcbiAgICB1cGRhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLmNlbnRlci54ICs9IHRoaXMudmVsb2NpdHkueDtcbiAgICAgICAgdGhpcy5jZW50ZXIueSArPSB0aGlzLnZlbG9jaXR5Lnk7IFxuXG4gICAgICAgIC8vIElmIHRoZSBNaXNzbGUgbW92ZXMgb2ZmIHRoZSBib2FyZFxuICAgICAgICAvLyBzZXQgdmlzaWJsZSB0byBmYXNsZVxuICAgICAgICBpZiAodGhpcy5jZW50ZXIueSA8ICAwIC0gKHRoaXMuZ2FtZVNpemUueSAqIDAuMTApICAgfHwgXG4gICAgICAgICAgICB0aGlzLmNlbnRlci55ID4gdGhpcy5nYW1lU2l6ZS55ICogMS4xMCAgICAgICAgICB8fFxuICAgICAgICAgICAgdGhpcy5jZW50ZXIueCA8IDAgLSAodGhpcy5nYW1lU2l6ZS54ICogMC4xMCkgICAgfHxcbiAgICAgICAgICAgIHRoaXMuY2VudGVyLnggPiB0aGlzLmdhbWVTaXplLnggKiAxLjEwKSB7XG5cbiAgICAgICAgICAgIHRoaXMudmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfSwgXG4gICAgZHJhdzogZnVuY3Rpb24oc2NyZWVuLCBib2R5KSB7XG4gICAgICAgIHNjcmVlbi5kcmF3SW1hZ2UoZ2FtZS5taXNzbGVJbWcsIGJvZHkuY2VudGVyLnggLSBib2R5LnNpemUueCAvIDIsIFxuICAgICAgICAgICAgYm9keS5jZW50ZXIueSAtIGJvZHkuc2l6ZS55IC8gMiAsIGJvZHkuc2l6ZS54LCBib2R5LnNpemUueSk7XG4gICAgfVxufTtcblxuY29uc3QgS2V5Ym9hcmRlciA9IGZ1bmN0aW9uKGdhbWUpIHtcbiAgICAgICAgbGV0IGtleVN0YXRlID0ge307IC8vIG5vdCBjb25zdFxuXG4gICAgICAgIHdpbmRvdy5vbmtleWRvd24gPSBmdW5jdGlvbihlKXtcbiAgICAgICAgICAgIGtleVN0YXRlW2Uua2V5Q29kZV0gPSB0cnVlO1xuXG4gICAgICAgICAgICBnYW1lLmtleVByZXNzZWQoZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgd2luZG93Lm9ua2V5dXAgPSBmdW5jdGlvbihlKXtcbiAgICAgICAgICAgIGtleVN0YXRlW2Uua2V5Q29kZV0gPSBmYWxzZTtcbiAgICAgICAgICAgIGdhbWUua2V5VXAoZSk7XG4gICAgICAgIH07XG5cblxuICAgICAgICB0aGlzLmlzRG93biA9IGZ1bmN0aW9uKGtleUNvZGUpIHtcbiAgICAgICAgICAgIHJldHVybiBrZXlTdGF0ZVtrZXlDb2RlXSA9PT0gdHJ1ZTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLktFWVMgPSB7IExFRlQ6IDM3LCBSSUdIVDogMzksIFVQOiA0MCwgRE9XTjogMzgsIFNQQUNFOiAzMiwgUDogODAgfTtcbn07XG5cbi8vIERldGVjdCBjb2xsaXNpb25zXG5jb25zdCBjb2xsaWRpbmcgPSBmdW5jdGlvbihiMSwgYjIpIHtcbiAgICByZXR1cm4gIShiMSA9PT0gYjIgfHxcbiAgICAgICAgKGIxIGluc3RhbmNlb2YgUGxheWVyICYmIGIyIGluc3RhbmNlb2YgTWlzc2xlKSAgfHxcbiAgICAgICAgKGIxIGluc3RhbmNlb2YgTWlzc2xlICYmIGIyIGluc3RhbmNlb2YgUGxheWVyKSAgfHxcbiAgICAgICAgKGIxIGluc3RhbmNlb2YgQnVsbGV0ICYmIGIyIGluc3RhbmNlb2YgQnVsbGV0KSAgfHxcbiAgICAgICAgKGIxIGluc3RhbmNlb2YgTWlzc2xlICYmIGIyIGluc3RhbmNlb2YgTWlzc2xlKSAgfHxcbiAgICAgICAgKGIxIGluc3RhbmNlb2YgSW52YWRlciAmJiBiMiBpbnN0YW5jZW9mIEludmFkZXIpfHxcbiAgICAgICAgKGIxIGluc3RhbmNlb2YgQnVsbGV0ICYmIGIyIGluc3RhbmNlb2YgTWlzc2xlKSAgfHxcbiAgICAgICAgKGIxIGluc3RhbmNlb2YgTWlzc2xlICYmIGIyIGluc3RhbmNlb2YgQnVsbGV0KSAgfHxcbiAgICAgICAgKGIxIGluc3RhbmNlb2YgSW52YWRlciAmJiBiMiBpbnN0YW5jZW9mIEJ1bGxldCkgfHxcbiAgICAgICAgKGIxIGluc3RhbmNlb2YgQnVsbGV0ICYmIGIyIGluc3RhbmNlb2YgSW52YWRlcikgfHxcbiAgICAgICAgYjEuY2VudGVyLnggKyBiMS5zaXplLnggLyAyIDwgYjIuY2VudGVyLnggLSBiMi5zaXplLnggLyAyIHx8XG4gICAgICAgIGIxLmNlbnRlci55ICsgYjEuc2l6ZS55IC8gMiA8IGIyLmNlbnRlci55IC0gYjIuc2l6ZS55IC8gMiB8fFxuICAgICAgICBiMS5jZW50ZXIueCAtIGIxLnNpemUueCAvIDIgPiBiMi5jZW50ZXIueCArIGIyLnNpemUueCAvIDIgfHxcbiAgICAgICAgYjEuY2VudGVyLnkgLSBiMS5zaXplLnkgLyAyID4gYjIuY2VudGVyLnkgKyBiMi5zaXplLnkgLyAyKTtcbn07XG5cbmNvbnN0IHRvZ2dsZVBhdXNlZCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICghdGhpcy5wYXVzZWQpIHtcbiAgICAgICAgZ2FtZS5wYXVzZWRUb2FzdCAmJiBnYW1lLnBhdXNlZFRvYXN0Lmluc2VydEFmdGVyKCdjYW52YXMnKTtcbiAgICAgICAgZ2FtZS5wYXVzZWRUb2FzdCAmJiBnYW1lLnBhdXNlZFRvYXN0LnNob3coKTsgICAgICAgIFxuICAgIH0gZWxzZSB7XG4gICAgICAgICQoJyNwYXVzZWRUb2FzdCcpLmRldGFjaCgpO1xuICAgIH1cbiAgICAgICAgdGhpcy5wYXVzZWQgPSAhdGhpcy5wYXVzZWQ7XG59O1xuXG5jb25zdCBsb2FkU291bmQgPSBmdW5jdGlvbih1cmwsIGNhbGxiYWNrKSB7XG4gICAgY29uc3QgbG9hZGVkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGNhbGxiYWNrKHNvdW5kKTtcbiAgICAgICAgc291bmQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2FucGxheXRocm91Z2gnLCBsb2FkZWQpO1xuICAgIH07XG5cbmNvbnN0IHNvdW5kID0gbmV3IEF1ZGlvKHVybCk7XG4gICAgc291bmQuYWRkRXZlbnRMaXN0ZW5lcignY2FucGxheXRocm91Z2gnLCBsb2FkZWQpO1xuICAgIHNvdW5kLmxvYWQoKTtcbn07XG5cbmNvbnN0IFNwcml0ZVBhaW50ZXIgPSBmdW5jdGlvbihpbWFnZXMpIHtcbiAgICB0aGlzLmltYWdlcyA9IGltYWdlcztcbiAgICB0aGlzLmltYWdlc0luZGV4ID0gMDtcbn07XG5cbmNvbnN0IHJhZGFyR3VpZGFuY2UgPSBmdW5jdGlvbihzaG9vdGVyLCB0YXJnZXQsIHZlbG9jaXR5KSB7XG4gICAgbGV0IHJldiA9IC0xLFxuICAgICAgICBkeCA9IHNob290ZXIuY2VudGVyLnggLSB0YXJnZXQuY2VudGVyLngsXG4gICAgICAgIGR5ID0gc2hvb3Rlci5jZW50ZXIueSAtIHRhcmdldC5jZW50ZXIueSxcbiAgICAgICAgdGhldGEgPSBNYXRoLmF0YW4oZHkgLyBkeCk7XG5cbiAgICBpZiAodGFyZ2V0LmNlbnRlci54IDwgc2hvb3Rlci5jZW50ZXIueCAmJiB0YXJnZXQuY2VudGVyLnkgPiBzaG9vdGVyLmNlbnRlci55KSBcbiAgICAgICAgcmV2ID0gMTtcbiAgICBlbHNlIGlmICh0YXJnZXQuY2VudGVyLnggPCBzaG9vdGVyLmNlbnRlci54ICYmIHRhcmdldC5jZW50ZXIueSA8IFxuICAgICAgICBzaG9vdGVyLmNlbnRlci55KSByZXYgPSAxO1xuXG4gICAgbGV0IHZlbG9jaXR5X0R4ID0gcmV2ICogdmVsb2NpdHkgKiBNYXRoLmNvcyh0aGV0YSksXG4gICAgICAgIHZlbG9jaXR5X0R5ID0gcmV2ICogdmVsb2NpdHkgKiBNYXRoLnNpbih0aGV0YSk7XG5cbiAgICByZXR1cm4ge3g6IHZlbG9jaXR5X0R4LCB5OiB2ZWxvY2l0eV9EeX07XG59O1xuXG5TcHJpdGVQYWludGVyLnByb3RvdHlwZSA9IHtcbiAgICBhZHZhbmNlOiBmdW5jdGlvbihib2R5KSB7XG4gICAgICAgIGlmICh0aGlzLmltYWdlc0luZGV4ID09PSB0aGlzLmltYWdlcy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICB0aGlzLmltYWdlc0luZGV4ID0gMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaW1hZ2VzSW5kZXgrKztcbiAgICAgICAgfVxuICAgIH0sXG4gICAgZHJhdzogZnVuY3Rpb24oc2NyZWVuLCBib2R5KSB7XG4gICAgICAgIGxldCBzcHJpdGVJbWFnZSA9IHRoaXMuaW1hZ2VzW3RoaXMuaW1hZ2VzSW5kZXhdO1xuXG4gICAgICAgIHNjcmVlbi5kcmF3SW1hZ2Uoc3ByaXRlSW1hZ2UsIGJvZHkuY2VudGVyLnggLSBib2R5LnNpemUueCAvIDIsXG4gICAgICAgIGJvZHkuY2VudGVyLnkgLSBib2R5LnNpemUueSAvIDIsIGJvZHkuc2l6ZS54LCBib2R5LnNpemUueSk7XG4gICAgfVxufTtcblxuY29uc3QgRXhwbG9zaW9uU3ByaXRlUGFpbnRlciA9IGZ1bmN0aW9uKGltYWdlcywga2luZE9mQm9keSkge1xuICAgIHRoaXMuaW1hZ2VzID0gaW1hZ2VzO1xuICAgIHRoaXMuaW1hZ2VzSW5kZXggPSAwO1xuICAgIHRoaXMua2luZE9mQm9keSA9IGtpbmRPZkJvZHkgPyBraW5kT2ZCb2R5IDogbnVsbDtcbn07XG5cbkV4cGxvc2lvblNwcml0ZVBhaW50ZXIucHJvdG90eXBlID0ge1xuICAgIGFkdmFuY2U6IGZ1bmN0aW9uKGJvZHkpIHtcbiAgICAgICAgLy8gTGFzdCBpbWFnZSBzbyByZXNldCBldmVyeXRoaW5nIGhlcmVcbiAgICAgICAgaWYgKHRoaXMuaW1hZ2VzSW5kZXggPT09IHRoaXMuaW1hZ2VzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgIGlmICAodGhpcy5raW5kT2ZCb2R5ID09PSAnSW52YWRlcicpIHtcbiAgICAgICAgICAgICAgICBib2R5LnJlbW92ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgYm9keS52aXNpYmxlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgYm9keS5hbmltYXRpbmcgPSBmYWxzZTtcblxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmtpbmRPZkJvZHkgPT09ICdQbGF5ZXInKSB7XG4gICAgICAgICAgICAgICAgYm9keS5yZW1vdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBib2R5LnZpc2libGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJvZHkuYW5pbWF0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgYm9keS5uYW1lID0gJ3BsYXllcic7XG4gICAgICAgICAgICAgICAgYm9keS5zaXplLnggLz0gZ2FtZS5wbGF5ZXJMaXZlc0xlZnQgPyAyLjUgOiA2LjA7XG4gICAgICAgICAgICAgICAgYm9keS5zaXplLnkgLz0gZ2FtZS5wbGF5ZXJMaXZlc0xlZnQgPyAyLjUgOiA2LjA7XG5cbiAgICAgICAgICAgICAgICAvLyBQbGF5ZXIgc3RpbGwgYWxpdmUgdGhlbiBwdXQgdGhlbSBiYWNrIG9uIHRoZSBjYW52YXNcbiAgICAgICAgICAgICAgICBpZiAoZ2FtZS5wbGF5ZXJMaXZlc0xlZnQgPiAwICYmIGdhbWUucGxheWVyU3RhdHVzID09PSAnREVBRCcpIHtcbiAgICAgICAgICAgICAgICAgICAgYm9keS5wYWludGVyID0gbmV3IFNwcml0ZVBhaW50ZXIoW2dhbWUucGxheWVySW1nXSk7XG4gICAgICAgICAgICAgICAgICAgIGdhbWUucGxheWVyU3RhdHVzID0gJ0FMSVZFJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGJvZHkucmVtb3ZlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBib2R5LnZpc2libGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBib2R5LmFuaW1hdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5pbWFnZXNJbmRleCsrO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBkcmF3OiBmdW5jdGlvbihzY3JlZW4sIGJvZHkpIHtcbiAgICAgICBsZXQgc3ByaXRlSW1hZ2UgPSB0aGlzLmltYWdlc1t0aGlzLmltYWdlc0luZGV4XTtcbiAgICAgICAgYm9keS5hbmltYXRpbmcgPSB0cnVlO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzY3JlZW4uZHJhd0ltYWdlKHNwcml0ZUltYWdlLCBib2R5LmNlbnRlci54IC0gYm9keS5zaXplLnggLyAyLFxuICAgICAgICAgICAgYm9keS5jZW50ZXIueSAtIGJvZHkuc2l6ZS55IC8gMiwgYm9keS5zaXplLngsIGJvZHkuc2l6ZS55KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgLy8gc3RhdGVtZW50cyB0byBoYW5kbGUgYW55IGV4Y2VwdGlvbnNcbiAgICAgICAgICAgY29uc29sZS53YXJuKCdFcnJvciB3cml0aW5nIHNwaXRlIHRvIHNjcmVlbiAnLCBlcnJvcik7IC8vIHBhc3MgZXhjZXB0aW9uIG9iamVjdCB0byBlcnJvciBoYW5kbGVyXG4gICAgICAgIH1cblxuICAgIH1cbn07XG5cbmNvbnN0IEN5Y2xlSW1hZ2VzID0gZnVuY3Rpb24oZnJhbWVDbnQsIFBBR0VfRkxJUF9JTlRFUlZBTCkge1xuICAgIHRoaXMuZnJhbWVDb3VudGVyID0gMDtcbiAgICB0aGlzLmZyYW1lQ250ID0gZnJhbWVDbnQ7XG4gICAgdGhpcy5sYXN0QWR2YW5jZSA9IDA7XG4gICAgdGhpcy5QQUdFX0ZMSVBfSU5URVJWQUwgPSBQQUdFX0ZMSVBfSU5URVJWQUw7XG59O1xuXG5DeWNsZUltYWdlcy5wcm90b3R5cGUgPSB7XG5cbiAgICBleGVjdXRlOiBmdW5jdGlvbihib2R5LCBnYW1lU2l6ZSwgdGltZSkge1xuICAgICAgICBpZiAodGltZSAtIHRoaXMubGFzdEFkdmFuY2UgPiB0aGlzLlBBR0VfRkxJUF9JTlRFUlZBTCkge1xuICAgICAgICAgICAgYm9keS5wYWludGVyLmFkdmFuY2UoYm9keSk7XG4gICAgICAgICAgICB0aGlzLmxhc3RBZHZhbmNlID0gdGltZTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cblxuLyogV2Ugc3RvcmUgbGV2ZWwgZGF0YSBoZXJlIGluIGFuIGFycmF5IG9mICBvYmplY3RzXG4gKiBAc3BlZWRYIC0gc3BlZWQgb2YgSW52YWRlcnNcbiAqIEBiZWhhdmlvciAtIHdoYXQgcGF0dGVybiBkbyB0aGUgSW52YWRlciB0YWtlIG9uIHRoZSBzY3JlZW5cbiAqIEByb3cgJiBAY29sIGhvdyBtYW55IGFyZSBvbiB0aGUgc2NyZWVuIFxuICogQGJhY2tncm91bmRJbWcgcGxhY2Vob2xkZXIgb2JqIGZvciBiYWNrZ3JvdW5kIGltYWdlLlxuICogQGludmFkZXJGaXJlUmF0ZSBvbmx5IHNtYWxsIHBlcmNlbnRhZ2UgaXMgbmVlZGVkID4gMTAlXG4gKiBAaW52YWRlckhpdHMgbnVtYmVyIG9mIGhpdHMgdG8ga2lsbCBhbiBJbnZhZGVyIC0tIEZvciBmdXR1cmUgdXNlLlxuKi9cbi8vIFRPRE86IE1ha2UgdGhpcyBhIERCIE1vbmdvLCBNeVNxbCwgb3IgUG9zdGdyZXMgY2FsbCB3aG8ga25vd3M/Pz9cbmNvbnN0IGxldmVsRGF0YSA9IFtcbiAgICB7ICAgc3BlZWRYOiAwLjAwMjAsXG4gICAgICAgIGJlaGF2aW9yOiBzaW5lV2F2ZSxcbiAgICAgICAgaW52YWRlckltYWdlOiB7fSwgXG4gICAgICAgIHJvdzogMixcbiAgICAgICAgY29sOiA3LFxuICAgICAgICBiYWNrZ3JvdW5kSW1nOiB7fSxcbiAgICAgICAgaW52YWRlckZpcmVSYXRlOiAwLjk5NSxcbiAgICAgICAgaW52YWRlckhpdHM6IDFcbiAgICB9LFxuICAgIHsgICBzcGVlZFg6IDAuMDAyMCxcbiAgICAgICAgYmVoYXZpb3I6IGhhbGZDaXJjbGUsXG4gICAgICAgIGludmFkZXJJbWFnZToge30sIFxuICAgICAgICByb3c6IDMsXG4gICAgICAgIGNvbDogNyxcbiAgICAgICAgYmFja2dyb3VuZEltZzoge30sXG4gICAgICAgIGludmFkZXJGaXJlUmF0ZTogMC45OTUsXG4gICAgICAgIGludmFkZXJIaXRzOiAxXG4gICAgfSxcbiAgICB7ICAgc3BlZWRYOiAwLjAwMjIsXG4gICAgICAgIGJlaGF2aW9yOiByaWdodFRvTGVmdCxcbiAgICAgICAgaW52YWRlckltYWdlOiB7fSwgXG4gICAgICAgIHJvdzogNCxcbiAgICAgICAgY29sOiA3LFxuICAgICAgICBiYWNrZ3JvdW5kSW1nOiB7fSxcbiAgICAgICAgaW52YWRlckZpcmVSYXRlOiAwLjk5NCxcbiAgICAgICAgaW52YWRlckhpdHM6IDFcbiAgICB9LFxuICAgIHsgICBzcGVlZFg6IDAuMDAyMjUsXG4gICAgICAgIGJlaGF2aW9yOiBkcm9wRGlhZ29uYWwsXG4gICAgICAgIGludmFkZXJJbWFnZToge30sIFxuICAgICAgICByb3c6IDUsXG4gICAgICAgIGNvbDogNyxcbiAgICAgICAgYmFja2dyb3VuZEltZzoge30sXG4gICAgICAgIGludmFkZXJGaXJlUmF0ZTogMC45OTQsXG4gICAgICAgIGludmFkZXJIaXRzOiAxXG4gICAgfSxcbl07XG5cbi8vIFdlIGNyZWF0ZSBhIG5ldyBnYW1lIGhlcmVcbmNvbnN0IGdhbWUgPSBuZXcgR2FtZShcIkRlZmVuZGVyXCIsIFwic2NyZWVuXCIpO1xuXG4vLyBQYXVzZSB0aGUgZ2FtZVxuZ2FtZS5hZGRLZXlMaXN0ZW5lcih7IGtleTogJ3AnLCBsaXN0ZW5lcjogZnVuY3Rpb24oKSB7XG4gICAgICAgIGdhbWUudG9nZ2xlUGF1c2VkKCk7XG59fSk7XG5cbi8vIFBvc2l0aW9uIHRoZSBQbGF5ZXIgYmFjayBhdCB0aGUgc3RhcnRcbmdhbWUuYWRkS2V5TGlzdGVuZXIoe2tleTogJ2MnLCBsaXN0ZW5lcjogZnVuY3Rpb24oKSB7XG4gICAgZ2FtZS5wbGF5ZXIuY2VudGVyID0geyB4OiBnYW1lLmdhbWVTaXplLnggLyAyLCB5OiBnYW1lLmdhbWVTaXplLnkgLSAxLjAgKiBnYW1lLnBsYXllci5zaXplLnkgfTtcbn19KTtcblxuLy8gVEhFIEh5cGVyc3BhY2UgYnV0dG9uIHRvIHRvIGdldCBvdXQgb2YgYSBUT1VHSCBKQU0/XG4vLyBNYXliZSBMT0whISEgSXQgaXMgcmFuZG9tIHBvc2l0aW9uaW5nXG4vLyBIYWQgdG8gdXNlIFwic1wiIGFzIFwiaFwiIG15IHByZWZlcnJlZCBrZXkgYW5kIFwieFwiIGFyZVxuLy8gc29tZWhvdyBpbnRlcmNlcHRlZCBieSB0aGUgYnJvd3Nlci5cbmdhbWUuYWRkS2V5TGlzdGVuZXIoe2tleTogJ3MnLCBsaXN0ZW5lcjogZnVuY3Rpb24oKSB7XG4gICAgZ2FtZS5wbGF5ZXIuY2VudGVyID0geyB4OiBnYW1lLmdhbWVTaXplLnggKiBNYXRoLnJhbmRvbSgpLCB5OiBnYW1lLmdhbWVTaXplLnkgKiBNYXRoLnJhbmRvbSgpIC0gZ2FtZS5wbGF5ZXIuc2l6ZS55fTtcbn19KTtcblxuZ2FtZS5hZGRLZXlMaXN0ZW5lcih7IGtleTogJ3NwYWNlYmFyJywgIGxpc3RlbmVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIC8vIHJlc2V0IGNvdW50ZXIgZm9yIGJ1bGxldHNcbiAgICAgICAgICAgIC8vIFdoZW4gc3BhY2ViYXIgY29tZXMgdXBcbiAgICAgICAgICAgIC8vIGtleVVwKCkgdXNlcyB0aGlzIGZ1bmN0aW9uXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGdhbWUuZ3VuX0xvY2tlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfSwgMjAwKTtcblxuICAgICAgICAgICAgaWYgKHNlbGYuZ2FtZU92ZXIpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ2FtZS5wYXVzZWQgJiYgIXNlbGYuZ2FtZU92ZXIpIHtcbiAgICAgICAgICAgICAgICBnYW1lLnRvZ2dsZVBhdXNlZCgpO1xuICAgICAgICAgICAgfVxuXG59fSk7XG5cbi8vIFJlc2V0IHRoZXNlIHdoZW4gdGhlIGFycm93IGtleXMgY29tZSBVUFxuZ2FtZS5hZGRLZXlMaXN0ZW5lcih7IGtleTogJ2xlZnQgYXJyb3cnLCAgbGlzdGVuZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZ2FtZS5wbGF5ZXIuc3RlcF9YID0gNDtcbn19KTtcblxuZ2FtZS5hZGRLZXlMaXN0ZW5lcih7IGtleTogJ3JpZ2h0IGFycm93JywgIGxpc3RlbmVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGdhbWUucGxheWVyLnN0ZXBfWCA9IDQ7XG59fSk7XG5nYW1lLmFkZEtleUxpc3RlbmVyKHsga2V5OiAndXAgYXJyb3cnLCAgbGlzdGVuZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZ2FtZS5wbGF5ZXIuc3RlcF9ZID0gNDtcbn19KTtcblxuZ2FtZS5hZGRLZXlMaXN0ZW5lcih7IGtleTogJ2Rvd24gYXJyb3cnLCAgbGlzdGVuZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZ2FtZS5wbGF5ZXIuc3RlcF9ZID0gNDtcbn19KTtcblxuJCgnI3BhdXNlZFRvYXN0Jykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSl7XG4gICAgZ2FtZS50b2dnbGVQYXVzZWQoKTtcbn0pO1xuXG4kKCcubmV3R2FtZUJ1dHRvbiwgLmNsb3NlSGlnaFNjb3JlVG9hc3QnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgIC8vIGNvbnNvbGUubG9nKCdnYW1lLnN0YXJ0KCk7Jyk7XG4gICAgLy8gR2V0IHRoZSByZXNldCgpIHdvcmtpbmcgbGF0ZXJcbiAgICAvLyBnYW1lLnJlc2V0KCk7XG4gICAgLy8gZ2FtZS5zdGFydCgpO1xuICAgIC8vIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsgLy8gaW5jb25zaXN0ZW50XG4gICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSB3aW5kb3cubG9jYXRpb24ub3JpZ2luO1xufSk7XG5cbiQoJyNuZXdHYW1lRnJvbUhpZ2hTY29yZS5uZXdHYW1lJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW47XG59KTtcblxuJCh3aW5kb3cpLm9uKCdibHVyJywgZnVuY3Rpb24oKSB7XG4gICAgaWYgKCFnYW1lLmdhbWVPdmVyICYmICFnYW1lLnBhdXNlZCkge1xuICAgICAgICBnYW1lLnRvZ2dsZVBhdXNlZCgpO1xufX0pO1xuXG4kKHdpbmRvdykub24oJ2ZvY3VzJywgZnVuY3Rpb24oKSB7XG4gICAgaWYgKGdhbWUucGF1c2VkKSB7XG4gICAgICAgIGdhbWUudG9nZ2xlUGF1c2VkKCk7XG59fSk7XG4gICAgXG4gICAgLy8gUXVldWUgSW1hZ2VzIGhlcmVcblxuICAgIC8vIExldmVsIEJhY2tncm91bmQgSW1hZ2VzXG4gICAgZ2FtZS5xdWV1ZUltYWdlKFwiL2ltYWdlcy9TcGFjZV8xX3NsaWNlLmpwZ1wiKTtcbiAgICBnYW1lLnF1ZXVlSW1hZ2UoXCIvaW1hZ2VzL01pbGt5X1dheS5qcGdcIik7XG4gICAgZ2FtZS5xdWV1ZUltYWdlKFwiL2ltYWdlcy9HYWxheHkuanBnXCIpO1xuICAgIGdhbWUucXVldWVJbWFnZShcIi9pbWFnZXMvU3BhY2VfMS5qcGdcIik7XG4gICAgLy8gZ2FtZS5xdWV1ZUltYWdlKFwiL2ltYWdlcy9cIik7XG5cbiAgICBnYW1lLnF1ZXVlSW1hZ2UoXCIvaW1hZ2VzL1N0YXJzaGlwcy9zdGFyc2hpcHNfMDAwN19FeC12aW5nLnBuZ1wiKTtcbiAgICBnYW1lLnF1ZXVlSW1hZ2UoXCIvaW1hZ2VzL21pc3NsZS5wbmdcIik7XG4gICAgLy8gIFF1ZXVlIEFsaWVuIHNoaXBzXG4gICAgZ2FtZS5xdWV1ZUltYWdlKFwiL2ltYWdlcy9TdGFyc2hpcHMvc3RhcnNoaXBzXzAwMDZfQm93LWZpZ2h0ZXJfUmV2LnBuZ1wiKTtcbiAgICBnYW1lLnF1ZXVlSW1hZ2UoXCIvaW1hZ2VzL1N0YXJzaGlwcy9zdGFyc2hpcHNfMDAwNF9JY2UtU3BlZWRzdGVyX1Jldi5wbmdcIik7XG4gICAgZ2FtZS5xdWV1ZUltYWdlKFwiL2ltYWdlcy9TdGFyc2hpcHMvc3RhcnNoaXBzXzAwMDVfQ2VudGVuaWFsLUhhd2tfUmV2LnBuZ1wiKTtcbiAgICBnYW1lLnF1ZXVlSW1hZ2UoXCIvaW1hZ2VzL1N0YXJzaGlwcy9zdGFyc2hpcHNfMDAwMV9TdW4ta2lsbGVyX1Jldi5wbmdcIik7XG4gICAgZ2FtZS5xdWV1ZUltYWdlKFwiL2ltYWdlcy9lbmVteS1idWxsZXQucG5nXCIpO1xuXG4gICAgLy8gRXhwbG9zaW9uIEltYWdlc1xuICAgIGdhbWUucXVldWVJbWFnZShcIi9pbWFnZXMvaW1nL2V4cGxvZGVfMS5wbmdcIik7XG4gICAgZ2FtZS5xdWV1ZUltYWdlKFwiL2ltYWdlcy9pbWcvZXhwbG9kZV8yLnBuZ1wiKTtcbiAgICBnYW1lLnF1ZXVlSW1hZ2UoXCIvaW1hZ2VzL2ltZy9leHBsb2RlXzMucG5nXCIpO1xuICAgIGdhbWUucXVldWVJbWFnZShcIi9pbWFnZXMvaW1nL2V4cGxvZGVfNC5wbmdcIik7XG4gICAgZ2FtZS5xdWV1ZUltYWdlKFwiL2ltYWdlcy9pbWcvZXhwbG9kZV81LnBuZ1wiKTtcbiAgICBnYW1lLnF1ZXVlSW1hZ2UoXCIvaW1hZ2VzL2ltZy9leHBsb2RlXzYucG5nXCIpO1xuICAgIGdhbWUucXVldWVJbWFnZShcIi9pbWFnZXMvaW1nL2V4cGxvZGVfNy5wbmdcIik7XG4gICAgZ2FtZS5xdWV1ZUltYWdlKFwiL2ltYWdlcy9pbWcvZXhwbG9kZV84LnBuZ1wiKTtcbiAgICBnYW1lLnF1ZXVlSW1hZ2UoXCIvaW1hZ2VzL2ltZy9leHBsb2RlXzkucG5nXCIpO1xuICAgIGdhbWUucXVldWVJbWFnZShcIi9pbWFnZXMvaW1nL2V4cGxvZGVfMTAucG5nXCIpO1xuICAgIGdhbWUucXVldWVJbWFnZShcIi9pbWFnZXMvaW1nL2V4cGxvZGVfMTEucG5nXCIpO1xuICAgIGdhbWUucXVldWVJbWFnZShcIi9pbWFnZXMvaW1nL2V4cGxvZGVfMTIucG5nXCIpO1xuICAgIGdhbWUucXVldWVJbWFnZShcIi9pbWFnZXMvaW1nL2V4cGxvZGVfMTMucG5nXCIpO1xuICAgIGdhbWUucXVldWVJbWFnZShcIi9pbWFnZXMvaW1nL2V4cGxvZGVfMTQucG5nXCIpO1xuICAgIGdhbWUucXVldWVJbWFnZShcIi9pbWFnZXMvaW1nL2V4cGxvZGVfMTUucG5nXCIpO1xuICAgIGdhbWUucXVldWVJbWFnZShcIi9pbWFnZXMvaW1nL2V4cGxvZGVfMTYucG5nXCIpO1xuICAgIFxuXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcblxuICAgICAgICBsZXQgbG9hZGluZ1BlcmNlbnRDb21wbGV0ZSA9IGdhbWUubG9hZEltYWdlcygpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnbG9hZGluZyBQZXJjZW50YWdlIENvbXBsZXRlZDogJywgbG9hZGluZ1BlcmNlbnRDb21wbGV0ZSk7XG5cbiAgICAgICAgaWYgKGxvYWRpbmdQZXJjZW50Q29tcGxldGUgPT09IDEwMCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJsb2FkaW5nIC4uLiAxMDAlIENvbXBsZXRlOiBPSyEhIVwiKTtcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xuICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFdlIE1VU1QgTG9hZCBBTEwgdGhlc2UgSW1hZ2VzIGhlcmVcbiAgICAgICAgICAgIGdhbWUuYmFja2dyb3VuZEltZyA9IGdhbWUuZ2V0SW1hZ2UoXCIvaW1hZ2VzL1NwYWNlXzFfc2xpY2UuanBnXCIpO1xuICAgICAgICAgICAgZ2FtZS5wbGF5ZXJJbWcgPSBnYW1lLmdldEltYWdlKFwiL2ltYWdlcy9TdGFyc2hpcHMvc3RhcnNoaXBzXzAwMDdfRXgtdmluZy5wbmdcIik7XG4gICAgICAgICAgICBnYW1lLm1pc3NsZUltZyA9IGdhbWUuZ2V0SW1hZ2UoXCIvaW1hZ2VzL21pc3NsZS5wbmdcIik7XG4gICAgICAgICAgICBnYW1lLmVuZW15X2J1bGxldEltZyA9IGdhbWUuZ2V0SW1hZ2UoXCIvaW1hZ2VzL2VuZW15LWJ1bGxldC5wbmdcIik7XG5cbiAgICAgICAgICAgIC8vIExvYWQgQWxpZW4gc2hpcHMgaW50byBsZXZlbCBvYmonc1xuICAgICAgICAgICAgLy8gVE9ETzogTG9hZCBhbGwgYnV0IGZpcnN0IGxhdGVyXG4gICAgICAgICAgICBnYW1lLmxldmVsRGF0YVswXS5pbnZhZGVySW1hZ2UgPSBnYW1lLmdldEltYWdlKFwiL2ltYWdlcy9TdGFyc2hpcHMvc3RhcnNoaXBzXzAwMDZfQm93LWZpZ2h0ZXJfUmV2LnBuZ1wiKTtcbiAgICAgICAgICAgIGdhbWUubGV2ZWxEYXRhWzFdLmludmFkZXJJbWFnZSA9IGdhbWUuZ2V0SW1hZ2UoXCIvaW1hZ2VzL1N0YXJzaGlwcy9zdGFyc2hpcHNfMDAwNF9JY2UtU3BlZWRzdGVyX1Jldi5wbmdcIik7XG4gICAgICAgICAgICBnYW1lLmxldmVsRGF0YVsyXS5pbnZhZGVySW1hZ2UgPSBnYW1lLmdldEltYWdlKFwiL2ltYWdlcy9TdGFyc2hpcHMvc3RhcnNoaXBzXzAwMDVfQ2VudGVuaWFsLUhhd2tfUmV2LnBuZ1wiKTtcbiAgICAgICAgICAgIGdhbWUubGV2ZWxEYXRhWzNdLmludmFkZXJJbWFnZSA9IGdhbWUuZ2V0SW1hZ2UoXCIvaW1hZ2VzL1N0YXJzaGlwcy9zdGFyc2hpcHNfMDAwMV9TdW4ta2lsbGVyX1Jldi5wbmdcIik7XG5cbiAgICAgICAgICAgIC8vIFRPRE86IExvYWQgYWxsIGJ1dCBmaXJzdCBsYXRlclxuICAgICAgICAgICAgZ2FtZS5sZXZlbERhdGFbMF0uYmFja2dyb3VuZEltZyA9IGdhbWUuZ2V0SW1hZ2UoXCIvaW1hZ2VzL1NwYWNlXzFfc2xpY2UuanBnXCIpO1xuICAgICAgICAgICAgZ2FtZS5sZXZlbERhdGFbMV0uYmFja2dyb3VuZEltZyA9IGdhbWUuZ2V0SW1hZ2UoXCIvaW1hZ2VzL01pbGt5X1dheS5qcGdcIik7XG4gICAgICAgICAgICBnYW1lLmxldmVsRGF0YVsyXS5iYWNrZ3JvdW5kSW1nID0gZ2FtZS5nZXRJbWFnZShcIi9pbWFnZXMvR2FsYXh5LmpwZ1wiKTtcbiAgICAgICAgICAgIGdhbWUubGV2ZWxEYXRhWzNdLmJhY2tncm91bmRJbWcgPSBnYW1lLmdldEltYWdlKFwiL2ltYWdlcy9TcGFjZV8xLmpwZ1wiKTtcblxuICAgICAgICAgICAgLy8gTG9hZCBFeHBsb3Npb24gSW1hZ2VzXG4gICAgICAgICAgICAvLyBUaGVzZSBhcmUgaW5saW5lL2xvb3AtdW5yb2xsZWQgZm9yIGZhc3RlciBsb2FkaW5nXG4gICAgICAgICAgICBnYW1lLnRtcDEgPSBnYW1lLmdldEltYWdlKFwiL2ltYWdlcy9pbWcvZXhwbG9kZV8xLnBuZ1wiKTtcbiAgICAgICAgICAgIGdhbWUudG1wMiA9IGdhbWUuZ2V0SW1hZ2UoXCIvaW1hZ2VzL2ltZy9leHBsb2RlXzIucG5nXCIpO1xuICAgICAgICAgICAgZ2FtZS50bXAzID0gZ2FtZS5nZXRJbWFnZShcIi9pbWFnZXMvaW1nL2V4cGxvZGVfMy5wbmdcIik7XG4gICAgICAgICAgICBnYW1lLnRtcDQgPSBnYW1lLmdldEltYWdlKFwiL2ltYWdlcy9pbWcvZXhwbG9kZV80LnBuZ1wiKTtcbiAgICAgICAgICAgIGdhbWUudG1wNSA9IGdhbWUuZ2V0SW1hZ2UoXCIvaW1hZ2VzL2ltZy9leHBsb2RlXzUucG5nXCIpO1xuICAgICAgICAgICAgZ2FtZS50bXA2ID0gZ2FtZS5nZXRJbWFnZShcIi9pbWFnZXMvaW1nL2V4cGxvZGVfNi5wbmdcIik7XG4gICAgICAgICAgICBnYW1lLnRtcDcgPSBnYW1lLmdldEltYWdlKFwiL2ltYWdlcy9pbWcvZXhwbG9kZV83LnBuZ1wiKTtcbiAgICAgICAgICAgIGdhbWUudG1wOCA9IGdhbWUuZ2V0SW1hZ2UoXCIvaW1hZ2VzL2ltZy9leHBsb2RlXzgucG5nXCIpO1xuICAgICAgICAgICAgZ2FtZS50bXA5ID0gZ2FtZS5nZXRJbWFnZShcIi9pbWFnZXMvaW1nL2V4cGxvZGVfOS5wbmdcIik7XG4gICAgICAgICAgICBnYW1lLnRtcDEwID0gZ2FtZS5nZXRJbWFnZShcIi9pbWFnZXMvaW1nL2V4cGxvZGVfMTAucG5nXCIpO1xuICAgICAgICAgICAgZ2FtZS50bXAxMSA9IGdhbWUuZ2V0SW1hZ2UoXCIvaW1hZ2VzL2ltZy9leHBsb2RlXzExLnBuZ1wiKTtcbiAgICAgICAgICAgIGdhbWUudG1wMTIgPSBnYW1lLmdldEltYWdlKFwiL2ltYWdlcy9pbWcvZXhwbG9kZV8xMi5wbmdcIik7XG4gICAgICAgICAgICBnYW1lLnRtcDEzID0gZ2FtZS5nZXRJbWFnZShcIi9pbWFnZXMvaW1nL2V4cGxvZGVfMTMucG5nXCIpO1xuICAgICAgICAgICAgZ2FtZS50bXAxNCA9IGdhbWUuZ2V0SW1hZ2UoXCIvaW1hZ2VzL2ltZy9leHBsb2RlXzE0LnBuZ1wiKTtcbiAgICAgICAgICAgIGdhbWUudG1wMTUgPSBnYW1lLmdldEltYWdlKFwiL2ltYWdlcy9pbWcvZXhwbG9kZV8xNS5wbmdcIik7XG4gICAgICAgICAgICBnYW1lLnRtcDE2ID0gZ2FtZS5nZXRJbWFnZShcIi9pbWFnZXMvaW1nL2V4cGxvZGVfMTYucG5nXCIpO1xuXG4gICAgfSwgMTYpO1xuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIGNvbnN0IGxvYWRUb2FzdFRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsb2FkVG9hc3RUaXRsZVwiKTtcblxuLy8gSGlkZSBDYW52YXNcbiQoJyNzY3JlZW4nKS5oaWRlKCk7XG5cblxuLy8gY2xpY2sgdG8gc3RhcnQgZ2FtZVxuJCgnI2xvYWRCdXR0b24nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuXG4vKiBIaWRlIEhUTUwgdXNpbmcgQ1NTXG4gKiBDbGFzc2VzIGFyZSB1c2VkIGZvciBzcGVlZFxuICogdG8gcmVkdWNlIHBhZ2UgZmxpY2tlciBcbiAqIGpRdWVyeSBmb3IgY29udmVuaWVuY2UgKi8gXG4kKCcjcGF1c2VkVG9hc3QnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuJCgnI3Njb3JlVG9hc3QnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuJCgnI3Byb2dyZXNzYmFyJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiQoJyNnYW1lT3ZlclRvYXN0JykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiQoJyNoaWdoU2NvcmVUb2FzdCcpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG5cbi8vIGRldGFjaCBhbmQgY2FjaGUgSFRNTCBzbmlwcGV0XG5nYW1lLmxvYWRpbmdUb2FzdCA9ICQoJyNsb2FkaW5nVG9hc3QnKS5kZXRhY2goKTtcbmdhbWUucGF1c2VkVG9hc3QgPSAkKCcjcGF1c2VkVG9hc3QnKS5kZXRhY2goKTtcbmdhbWUucHJvZ3Jlc3NiYXIgPSAkKCcjcHJvZ3Jlc3NiYXInKS5kZXRhY2goKTtcbmdhbWUuZ2FtZU92ZXJUb2FzdCA9ICQoJyNnYW1lT3ZlclRvYXN0JykuZGV0YWNoKCk7XG5nYW1lLmhpZ2hTY29yZVRvYXN0ID0gJCgnI2hpZ2hTY29yZVRvYXN0JykuZGV0YWNoKCk7XG5cbiQoJyNzY3JlZW4nKS5zaG93KCk7XG4vLyBsb2FkVG9hc3RUaXRsZS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4vLyAkKCdsb2FkVG9hc3RUaXRsZScpLmhpZGUoKVxuXG4gICAgLy8gJCgnI2xvYWRUb2FzdFRpdGxlJykuY3NzKFwiZGlzcGxheVwiLCBcIm5vbmVcIik7XG5cblxuICAgIGdhbWUuZXhwbG9zaW9uSW1hZ2VzLnB1c2goIGdhbWUudG1wMSwgZ2FtZS50bXAyLCBnYW1lLnRtcDMsIGdhbWUudG1wNCxcbiAgICAgICAgZ2FtZS50bXA1LCBnYW1lLnRtcDYsIGdhbWUudG1wNywgZ2FtZS50bXA4LCBnYW1lLnRtcDksIGdhbWUudG1wMTAsXG4gICAgICAgIGdhbWUudG1wMTEsIGdhbWUudG1wMTIsZ2FtZS50bXAxMywgZ2FtZS50bXAxNCwgZ2FtZS50bXAxNSwgZ2FtZS50bXAxNiApO1xuICAgICAgICAgICAgXG4gICAgLy8gZ2FtZS5sb2FkTGV2ZWwoMCk7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIC8vIERlbGF5IHN0YXJ0IG9mIGdhbWUgdG8gbWFrZSBzdXJlIGFsbCBhc3NldHMgaGF2ZSBsb2FkZWRcbiAgICAvLyBUT0RPIGNoYW5nZSB0byBhIHByb21pc2UvY2FsbGJhY2tcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgIGdhbWUuc3RhcnQoKTtcbiAgICB9LCAyNTApXG59KTtcblxuY29uc3QgZ1Njb3JlID0gZ2FtZS5zY29yZTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBSEE7QUFDQTtBQUtBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUxBO0FBQ0E7QUFPQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQS9VQTtBQUNBO0FBbVZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBdkRBO0FBQ0E7QUF5REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXJDQTtBQUNBO0FBdUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQWJBO0FBQ0E7QUFnQkE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBbkJBO0FBc0JBO0FBRUE7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFqQkE7QUFvQkE7QUFFQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFoQkE7QUFDQTtBQWtCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFBQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQWxCQTtBQUNBO0FBb0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQUE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFsQkE7QUFDQTtBQW9CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFjQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUtBO0FBS0E7QUFBQTtBQUdBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQWJBO0FBQ0E7QUFlQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQTVDQTtBQUNBO0FBOENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBQVdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUEE7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUEE7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUEE7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUEE7QUFDQTtBQVdBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFDQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBZkE7QUFDQTtBQWlCQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFJQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUlBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./client/src/game.js\n");

/***/ })

/******/ });